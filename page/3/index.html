<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Doing is better than saying.">
<meta property="og:type" content="website">
<meta property="og:title" content="winney">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="winney">
<meta property="og:description" content="Doing is better than saying.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="winney">
<meta property="article:tag" content="winneyBlog   博客">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>winney</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">winney</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">It is never too old to learn.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <img alt="winney" src="/images/blog-head.jpg">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/04/Vite%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="winney">
      <meta itemprop="description" content="Doing is better than saying.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="winney">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/04/Vite%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">Vite配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-04 10:36:44" itemprop="dateCreated datePublished" datetime="2022-08-04T10:36:44+08:00">2022-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-24 18:09:23" itemprop="dateModified" datetime="2022-08-24T18:09:23+08:00">2022-08-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>配置文件：<code>vite.config.ts</code></p>
<h3 id="1-配置打包公共路径-base"><a href="#1-配置打包公共路径-base" class="headerlink" title="1.配置打包公共路径-base"></a>1.配置打包公共路径-base</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base:&#x27;./&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置地址别名-alias"><a href="#2-配置地址别名-alias" class="headerlink" title="2.配置地址别名-alias"></a>2.配置地址别名-<a target="_blank" rel="noopener" href="https://vitejs.cn/config/#resolve-alias">alias</a></h3><p>使用简短的别名去替代一个较长的路径</p>
<p><code>__dirname</code>：项目的绝对路径</p>
<ol>
<li><p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save path</span><br></pre></td></tr></table></figure>
</li>
<li><p>引入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; resolve &#125; from &#x27;path&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default defineConfig(&#123;</span><br><span class="line">  resolve:&#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      test: resolve(__dirname, &#x27;src/components/test/&#x27;),</span><br><span class="line">      icon: resolve(__dirname, &#x27;./src/assets/images/&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 修改前：</span><br><span class="line">import ViteSet from &#x27;../../components/test/ViteSet.vue&#x27;;</span><br><span class="line">&lt;img src=&quot;../../assets/images/zhangyu.svg&quot; alt=&quot;章鱼小丸子&quot;&gt;</span><br><span class="line">        </span><br><span class="line">// 修改后：</span><br><span class="line">import ViteSet2 from &#x27;test/ViteSet.vue&#x27;;</span><br><span class="line">&lt;img src=&quot;icon/zhangyu.svg&quot; alt=&quot;章鱼小丸子&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;ViteSet&gt;&lt;/ViteSet&gt;</span><br><span class="line">&lt;ViteSet2&gt;&lt;/ViteSet2&gt;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="2-1图片的地址的别名-特殊处理"><a href="#2-1图片的地址的别名-特殊处理" class="headerlink" title="2.1图片的地址的别名-特殊处理"></a>2.1图片的地址的别名-特殊处理</h4><blockquote>
<p>图片使用<code>icon: resolve(__dirname, &#39;./src/assets/images/&#39;)</code>这种配置，打包上线后，页面可以正常显示图片，但本地测试是加载不出图片的。</p>
<p>所以不能直接写 <code>名称：resolve(...)</code>，要使用引号加<code>斜杠开头的别名</code></p>
</blockquote>
<h5 id="2-1-1配置"><a href="#2-1-1配置" class="headerlink" title="2.1.1配置"></a>2.1.1配置</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve:&#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &#x27;/icon&#x27;:&#x27;./src/assets/images/&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-1-2使用"><a href="#2-1-2使用" class="headerlink" title="2.1.2使用"></a>2.1.2使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 修改前：</span><br><span class="line">&lt;img src=&quot;../../assets/images/zhangyu.svg&quot; alt=&quot;章鱼小丸子&quot;&gt;</span><br><span class="line">// 修改后：</span><br><span class="line">&lt;img src=&quot;/icon/zhangyu.svg&quot; alt=&quot;章鱼小丸子&quot;&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>这样本地环境和正式环境都能正常显示</strong></p>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/liujucai/article/details/112280937">vite vue3.0 配置拦截，路由跳转</a></p>
<h3 id="3-生产环境去除console-log的配置"><a href="#3-生产环境去除console-log的配置" class="headerlink" title="3.生产环境去除console.log的配置"></a>3.生产环境去除console.log的配置</h3><p><a target="_blank" rel="noopener" href="https://vitejs.cn/config/#build-terseroptions">build.terserOptions</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export default defineConfig(&#123;</span><br><span class="line">  build:&#123;</span><br><span class="line">    minify: &#x27;terser&#x27;, // 必须配置&#x27;terser&#x27;，不然terserOptions不生效，因为minify默认不是&#x27;terser&#x27;</span><br><span class="line">    terserOptions: &#123;</span><br><span class="line">        compress: &#123;</span><br><span class="line">            //生产环境时移除console</span><br><span class="line">            drop_console: true,</span><br><span class="line">            drop_debugger: true,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-1报错处理"><a href="#3-1报错处理" class="headerlink" title="3.1报错处理"></a>3.1报错处理</h4><p>打包上线会出现报错：</p>
<p><code>[vite:terser] terser not found. Since Vite v3, terser has become an optional dependency. You need to install it.</code></p>
<p>解决：Vite V3需要安装<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/terser">terser依赖包</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i terser</span><br></pre></td></tr></table></figure>

<h3 id="4-mock数据的配置"><a href="#4-mock数据的配置" class="headerlink" title="4.mock数据的配置"></a>4.mock数据的配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vite-plugin-mock mockjs  -D</span><br></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://github.com/vbenjs/vite-plugin-mock">vite-plugin-mock</a></strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/vbenjs/vite-plugin-mock#usage">使用</a></p>
<h4 id="4-1引入"><a href="#4-1引入" class="headerlink" title="4.1引入"></a>4.1引入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; viteMockServe &#125; from &#x27;vite-plugin-mock&#x27;</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  vue(),</span><br><span class="line">  viteMockServe(&#123;</span><br><span class="line">    // default</span><br><span class="line">    mockPath: &#x27;mock&#x27;,</span><br><span class="line">  &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h4 id="4-2使用"><a href="#4-2使用" class="headerlink" title="4.2使用"></a>4.2使用</h4><p>在根目录新建mock目录</p>
<p><a target="_blank" rel="noopener" href="https://github.com/vbenjs/vite-plugin-mock#mock-file-example">示例</a></p>
<h5 id="4-2-1mock-index-ts："><a href="#4-2-1mock-index-ts：" class="headerlink" title="4.2.1mock/index.ts："></a>4.2.1mock/index.ts：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// test.ts</span><br><span class="line">import &#123; MockMethod &#125; from &#x27;vite-plugin-mock&#x27;</span><br><span class="line">export default [</span><br><span class="line">  &#123;</span><br><span class="line">    url: &#x27;/api/get&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    response: (&#123; query &#125;) =&gt; &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        code: 0,</span><br><span class="line">        data: &#123;</span><br><span class="line">          name: &#x27;vben&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    url: &#x27;/api/post&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    timeout: 2000,</span><br><span class="line">    response: &#123;</span><br><span class="line">      code: 0,</span><br><span class="line">      data: &#123;</span><br><span class="line">        name: &#x27;vben&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    url: &#x27;/api/text&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    rawResponse: async (req, res) =&gt; &#123;</span><br><span class="line">      let reqbody = &#x27;&#x27;</span><br><span class="line">      await new Promise((resolve) =&gt; &#123;</span><br><span class="line">        req.on(&#x27;data&#x27;, (chunk) =&gt; &#123;</span><br><span class="line">          reqbody += chunk</span><br><span class="line">        &#125;)</span><br><span class="line">        req.on(&#x27;end&#x27;, () =&gt; resolve(undefined))</span><br><span class="line">      &#125;)</span><br><span class="line">      res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;)</span><br><span class="line">      res.statusCode = 200</span><br><span class="line">      res.end(`hello, $&#123;reqbody&#125;`)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">] as MockMethod[]</span><br></pre></td></tr></table></figure>

<h5 id="4-2-2引入axios"><a href="#4-2-2引入axios" class="headerlink" title="4.2.2引入axios"></a>4.2.2引入axios</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i axios</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">async function fn() &#123;</span><br><span class="line">  const &#123; data &#125; = await axios.get(&#x27;/api/get&#x27;)</span><br><span class="line">  console.log(data);</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br></pre></td></tr></table></figure>

<h5 id="使用mock来模拟更多数据"><a href="#使用mock来模拟更多数据" class="headerlink" title="使用mock来模拟更多数据"></a>使用mock来模拟更多数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mockjs --save-dev</span><br></pre></td></tr></table></figure>

<p>使用示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import Mock from &#x27;mockjs&#x27;</span><br><span class="line"></span><br><span class="line">// 定义数据类型</span><br><span class="line">var data = Mock.mock(&#123;</span><br><span class="line">  // 20条数据</span><br><span class="line">  &quot;data|20&quot;: [&#123;</span><br><span class="line">    // 商品种类</span><br><span class="line">    &quot;goodsClass&quot;: &quot;女装&quot;,</span><br><span class="line">    // 商品Id</span><br><span class="line">    &quot;goodsId|+1&quot;: 1,</span><br><span class="line">    //商品名称</span><br><span class="line">    &quot;goodsName&quot;: &quot;@ctitle(10)&quot;,</span><br><span class="line">    //商品地址</span><br><span class="line">    &quot;goodsAddress&quot;: &quot;@county(true)&quot;,</span><br><span class="line">    //商品等级评价★</span><br><span class="line">    &quot;goodsStar|1-5&quot;: &quot;★&quot;,</span><br><span class="line">    //商品图片</span><br><span class="line">    &quot;goodsImg&quot;: &quot;@Image(&#x27;100x100&#x27;,&#x27;@color&#x27;,&#x27;小甜甜&#x27;)&quot;,</span><br><span class="line">    //商品售价</span><br><span class="line">    &quot;goodsSale|30-500&quot;: 30</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br><span class="line">// 输出结果随机生成的数据（node index.js）</span><br><span class="line"> console.log(data);</span><br></pre></td></tr></table></figure>

<h5 id="将mock模拟的数据放到接口返回中"><a href="#将mock模拟的数据放到接口返回中" class="headerlink" title="将mock模拟的数据放到接口返回中"></a>将mock模拟的数据放到接口返回中</h5><p>mock/index.ts：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// test.ts</span><br><span class="line">import &#123; MockMethod &#125; from &#x27;vite-plugin-mock&#x27;</span><br><span class="line">import Mock from &#x27;mockjs&#x27;</span><br><span class="line">var list = Mock.mock(&#123;</span><br><span class="line">  // 20条数据</span><br><span class="line">  &quot;data|20&quot;: [&#123;</span><br><span class="line">    // 商品种类</span><br><span class="line">    &quot;goodsClass&quot;: &quot;女装&quot;,</span><br><span class="line">    // 商品Id</span><br><span class="line">    &quot;goodsId|+1&quot;: 1,</span><br><span class="line">    //商品名称</span><br><span class="line">    &quot;goodsName&quot;: &quot;@ctitle(10)&quot;,</span><br><span class="line">    //商品地址</span><br><span class="line">    &quot;goodsAddress&quot;: &quot;@county(true)&quot;,</span><br><span class="line">    //商品等级评价★</span><br><span class="line">    &quot;goodsStar|1-5&quot;: &quot;★&quot;,</span><br><span class="line">    //商品图片</span><br><span class="line">    &quot;goodsImg&quot;: &quot;@Image(&#x27;100x100&#x27;,&#x27;@color&#x27;,&#x27;小甜甜&#x27;)&quot;,</span><br><span class="line">    //商品售价</span><br><span class="line">    &quot;goodsSale|30-500&quot;: 30</span><br><span class="line"></span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br><span class="line">export default [</span><br><span class="line">  &#123;</span><br><span class="line">    url: &#x27;/api/get&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    response: (&#123; query &#125;) =&gt; &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        code: 0,</span><br><span class="line">        data: list</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">] as MockMethod[]</span><br></pre></td></tr></table></figure>

<h3 id="5-配置前端跨域代理"><a href="#5-配置前端跨域代理" class="headerlink" title="5.配置前端跨域代理"></a>5.配置前端跨域代理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">        &#x27;/ss&#x27;: &#123;</span><br><span class="line">            target: &#x27;https://saucenao.com/search.php?db=999&amp;output_type=2&amp;url=https://pica.zhimg.com/v2-178387c7e8e907910d715e890bfd7519_1440w.jpg?source=172ae18b&amp;api_key=33d4bee5c19583cd3756ee47f2ebef8edd5bef7e&#x27;,</span><br><span class="line">            changeOrigin: true,</span><br><span class="line">            rewrite: (path) =&gt; path.replace(/^\/ss/, &#x27;&#x27;),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;/ss&#x27;).then(res =&gt; &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6-env环境变量的配置"><a href="#6-env环境变量的配置" class="headerlink" title="6.env环境变量的配置"></a>6.env环境变量的配置</h3><h4 id="6-1环境变量配置"><a href="#6-1环境变量配置" class="headerlink" title="6.1环境变量配置"></a>6.1环境变量配置</h4><p><code>.env.development</code>：</p>
<p>可配置多个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VITE_BASE_API = /api</span><br><span class="line">VITE_BASE_API = /api2</span><br><span class="line">VITE_BASE_API = /api3</span><br></pre></td></tr></table></figure>

<p><code>.env.production</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VITE_BASE_API = https://www.manga2020.com/api/v3/comic/hydxjxrwgb/chapter/cb321fca-c608-11e8-879b-024352452ce0?timeout=10000</span><br></pre></td></tr></table></figure>

<h4 id="6-2修改请求链接"><a href="#6-2修改请求链接" class="headerlink" title="6.2修改请求链接"></a>6.2修改请求链接</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">async function fn() &#123;</span><br><span class="line">  const &#123; data &#125; = await axios.get(import.env.VITE_BASE_API as string)</span><br><span class="line">  console.log(data);</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>本地环境使用mock数据： /api    正式环境使用正式的api链接</p>
<p>这样本地可以使用mock数据，正式使用正式的api数据。互不影响。  </p>
</blockquote>
<h3 id="7-CDN的配置"><a href="#7-CDN的配置" class="headerlink" title="7.CDN的配置"></a>7.CDN的配置</h3><p><code>备注：暂时配置不成功</code></p>
<p><strong><a target="_blank" rel="noopener" href="https://github.com/MMF-FE/vite-plugin-cdn-import">vite-plugin-cdn-import</a></strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/MMF-FE/vite-plugin-cdn-import#vueuse-demo">vue使用示例</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vite-plugin-cdn-import --save-dev</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import importToCDN, &#123; autoComplete &#125; from &#x27;vite-plugin-cdn-import&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        vue(),</span><br><span class="line">        importToCDN(&#123;</span><br><span class="line">            modules: [</span><br><span class="line">                autoComplete(&#x27;vue&#x27;), // vue2 use autoComplete(&#x27;vue2&#x27;)</span><br><span class="line">                autoComplete(&#x27;@vueuse/shared&#x27;),</span><br><span class="line">                autoComplete(&#x27;@vueuse/core&#x27;)</span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-代码压缩的配置-gzip"><a href="#8-代码压缩的配置-gzip" class="headerlink" title="8.代码压缩的配置-gzip"></a>8.代码压缩的配置-gzip</h3><p><strong><a target="_blank" rel="noopener" href="https://github.com/vbenjs/vite-plugin-compression">vite-plugin-compression</a></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vite-plugin-compression -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import viteCompression from &#x27;vite-plugin-compression&#x27;;</span><br><span class="line"></span><br><span class="line">export default () =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    plugins: [viteCompression()],</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="9-打包图片"><a href="#9-打包图片" class="headerlink" title="9.打包图片"></a>9.打包图片</h3><p><strong><a target="_blank" rel="noopener" href="https://github.com/vbenjs/vite-plugin-imagemin">vite-plugin-imagemin</a></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i vite-plugin-imagemin@0.4.6 -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import viteImagemin from &#x27;vite-plugin-imagemin&#x27;</span><br><span class="line">export default () =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      viteImagemin(&#123;</span><br><span class="line">        gifsicle: &#123;</span><br><span class="line">          optimizationLevel: 7,</span><br><span class="line">          interlaced: false,</span><br><span class="line">        &#125;,</span><br><span class="line">        optipng: &#123;</span><br><span class="line">          optimizationLevel: 7,</span><br><span class="line">        &#125;,</span><br><span class="line">        mozjpeg: &#123;</span><br><span class="line">          quality: 20,</span><br><span class="line">        &#125;,</span><br><span class="line">        pngquant: &#123;</span><br><span class="line">          quality: [0.8, 0.9],</span><br><span class="line">          speed: 4,</span><br><span class="line">        &#125;,</span><br><span class="line">        svgo: &#123;</span><br><span class="line">          plugins: [</span><br><span class="line">            &#123;</span><br><span class="line">              name: &#x27;removeViewBox&#x27;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              name: &#x27;removeEmptyAttrs&#x27;,</span><br><span class="line">              active: false,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码，本地会报错，需重启一下</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.icode9.com/content-4-1151614.html">搭建vite2.0+vue3.0+ts+多页面打包+多环境+gzip+图片压缩框架</a></p>
<p><a target="_blank" rel="noopener" href="https://www.pudn.com/news/627cb910ebb030486dd6b752.html">Vite图片压缩(vite-plugin-imagemin) imagemin error: XXXX解决办法</a></p>
<h3 id="10-element-plus按需引入"><a href="#10-element-plus按需引入" class="headerlink" title="10.element plus按需引入"></a>10.<a target="_blank" rel="noopener" href="https://element-plus.gitee.io/zh-CN/guide/quickstart.html#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5">element plus按需引入</a></h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5f70056a03b6">做个开源博客学习Vite2 + Vue3 （二）设置别名、代理和ESLint</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/01/vue3-vite-%E7%96%AB%E6%83%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="winney">
      <meta itemprop="description" content="Doing is better than saying.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="winney">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/01/vue3-vite-%E7%96%AB%E6%83%85/" class="post-title-link" itemprop="url">vue3-vite-疫情</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-01 10:59:14" itemprop="dateCreated datePublished" datetime="2022-08-01T10:59:14+08:00">2022-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-24 18:09:23" itemprop="dateModified" datetime="2022-08-24T18:09:23+08:00">2022-08-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><code>备注：</code> 对应项目vue3-vite-yiqing  【移动端——展示疫情实时数】</p>
<p><a target="_blank" rel="noopener" href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project">Vite官网</a></p>
<p>优点：使用vite创建的项目，运行比webpack创建的要快</p>
<h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">√ Project name: ... vue3-vite-yiqing</span><br><span class="line">√ Select a framework: » vue</span><br><span class="line">√ Select a variant: » vue-ts</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd vue3-vite-yiqing</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>VSCode中安装Vetur插件</p>
<h4 id="安装less"><a href="#安装less" class="headerlink" title="安装less"></a>安装less</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i less less-loader -D</span><br></pre></td></tr></table></figure>

<h4 id="在main-ts中引入reset-less"><a href="#在main-ts中引入reset-less" class="headerlink" title="在main.ts中引入reset.less"></a>在main.ts中引入reset.less</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./assets/css/reset.less&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="reset-less"><a href="#reset-less" class="headerlink" title="reset.less"></a>reset.less</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">/* http://meyerweb.com/eric/tools/css/reset/ </span><br><span class="line">   v2.0 | 20110126</span><br><span class="line">   License: none (public domain)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">html, body, div, span, applet, object, iframe,</span><br><span class="line">h1, h2, h3, h4, h5, h6, p, blockquote, pre,</span><br><span class="line">a, abbr, acronym, address, big, cite, code,</span><br><span class="line">del, dfn, em, img, ins, kbd, q, s, samp,</span><br><span class="line">small, strike, strong, sub, sup, tt, var,</span><br><span class="line">b, u, i, center,</span><br><span class="line">dl, dt, dd, ol, ul, li,</span><br><span class="line">fieldset, form, label, legend,</span><br><span class="line">table, caption, tbody, tfoot, thead, tr, th, td,</span><br><span class="line">article, aside, canvas, details, embed, </span><br><span class="line">figure, figcaption, footer, header, hgroup, </span><br><span class="line">menu, nav, output, ruby, section, summary,</span><br><span class="line">time, mark, audio, video &#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">	border: 0;</span><br><span class="line">	// font-size: 100%;</span><br><span class="line">	// font: inherit;</span><br><span class="line">	vertical-align: baseline;</span><br><span class="line">&#125;</span><br><span class="line">/* HTML5 display-role reset for older browsers */</span><br><span class="line">article, aside, details, figcaption, figure, </span><br><span class="line">footer, header, hgroup, menu, nav, section &#123;</span><br><span class="line">	display: block;</span><br><span class="line">&#125;</span><br><span class="line">body &#123;</span><br><span class="line">	line-height: 1;</span><br><span class="line">&#125;</span><br><span class="line">ol, ul &#123;</span><br><span class="line">	list-style: none;</span><br><span class="line">&#125;</span><br><span class="line">blockquote, q &#123;</span><br><span class="line">	quotes: none;</span><br><span class="line">&#125;</span><br><span class="line">blockquote:before, blockquote:after,</span><br><span class="line">q:before, q:after &#123;</span><br><span class="line">	content: &#x27;&#x27;;</span><br><span class="line">	content: none;</span><br><span class="line">&#125;</span><br><span class="line">table &#123;</span><br><span class="line">	border-collapse: collapse;</span><br><span class="line">	border-spacing: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="设置根节点font-size值，使用rem适配"><a href="#设置根节点font-size值，使用rem适配" class="headerlink" title="设置根节点font-size值，使用rem适配"></a>设置根节点font-size值，使用rem适配</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:root&#123;</span><br><span class="line"> font-size: 0.13333333vw;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样设置之后1px = 1rem</p>
</blockquote>
<h4 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">  margin: 0;</span><br><span class="line">  display: flex;</span><br><span class="line">  place-items: center;</span><br><span class="line">  min-width: 320px;</span><br><span class="line">  min-height: 100vh;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置手机可访问本地电脑项目"><a href="#配置手机可访问本地电脑项目" class="headerlink" title="配置手机可访问本地电脑项目"></a>配置手机可访问本地电脑项目</h4><p><a target="_blank" rel="noopener" href="http://www.manongjc.com/detail/29-saiyfskdbsqqcmz.html">Vite 使用本地ip+localhost访问服务</a></p>
<p>使用vite新建的项目默认访问链接：<a target="_blank" rel="noopener" href="http://127.0.0.1:5173/">http://127.0.0.1:5173/</a></p>
<ol>
<li><p>修改<code>vite.config.js</code>文件，添加<code>server</code>配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server: &#123;</span><br><span class="line">    host: &#x27;0.0.0.0&#x27;,</span><br><span class="line">    port: 8888,</span><br><span class="line">    open: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue()],</span><br><span class="line">  base:&#x27;./&#x27;,    // 处理打包后放正式环境的相对路径的问题</span><br><span class="line">  server: &#123;		// 处理使用本地ip访问页面</span><br><span class="line">    host: &#x27;0.0.0.0&#x27;,</span><br><span class="line">    port: 8888,</span><br><span class="line">    open: true</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>若使用手机访问本地ip页面，访问不成功（显示“服务器已停用”）。即要将本地电脑的防火墙“关闭”即可。<a target="_blank" rel="noopener" href="https://blog.csdn.net/zoepriselife316/article/details/117957732">手机和电脑连接同一wifi,手机访问不了电脑起的项目</a></p>
<p>电脑的“设置”——“网络和共享中心”——“Windows Defender 防火墙”（左下角）——“启用或关闭Windows Defender 防火墙”（左侧）——选择“关闭”（专用网络和公用网络都关闭）</p>
<p>注意：使用完，最好重新“启用”防火墙。</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/dd26cae7d7b2">vite.config.js之resolve.alias配置</a></p>
<h4 id="axios请求数据"><a href="#axios请求数据" class="headerlink" title="axios请求数据"></a>axios请求数据</h4><p>vue3中在onMounted生命周期中发出请求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i axios</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onMounted&#x27;)</span><br><span class="line">    axios(&#x27;https://c.m.163.com/api/ug/api/wuhan/app/data/list-total?t=330415245809&#x27;)</span><br><span class="line">    .then(res =&gt; &#123;</span><br><span class="line">        console.log(res);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="跨域请求处理"><a href="#跨域请求处理" class="headerlink" title="跨域请求处理"></a>跨域请求处理</h4><p>修改<code>vite.config.ts</code>文件，添加以下代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server: &#123;</span><br><span class="line">    // hmr: true,  // 开启热更新</span><br><span class="line">   proxy: &#123;</span><br><span class="line">      &#x27;/api&#x27;: &#123;</span><br><span class="line">        target: &#x27;https://c.m.163.com&#x27;,</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        rewrite: (path) =&gt; path.replace(/^\/api/, &#x27;&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>vite.config.ts</code>修改后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line"></span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue()],</span><br><span class="line">  base:&#x27;./&#x27;,    // 处理打包后放正式环境的相对路径的问题</span><br><span class="line">  server: &#123;</span><br><span class="line">    host: &#x27;0.0.0.0&#x27;,</span><br><span class="line">    port: 8888,</span><br><span class="line">    open: true,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      &#x27;/api&#x27;: &#123;</span><br><span class="line">        target: &#x27;https://c.m.163.com&#x27;,</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        rewrite: (path) =&gt; path.replace(/^\/api/, &#x27;&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意：修改配置文件后，要重启项目。(在vite搭建的项目，不需要重启)</p>
<h5 id="修改请求链接"><a href="#修改请求链接" class="headerlink" title="修改请求链接"></a>修改请求链接</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios(&#x27;/api/ug/api/wuhan/app/data/list-total?t=330415245809&#x27;)</span><br><span class="line">.then(res =&gt; &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="对接口获取到的数据对象使用TS进行数据类型约束"><a href="#对接口获取到的数据对象使用TS进行数据类型约束" class="headerlink" title="对接口获取到的数据对象使用TS进行数据类型约束"></a>对接口获取到的数据对象使用TS进行数据类型约束</h4><ol>
<li><p>使用泛型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface IData&#123;</span><br><span class="line">	name: string;</span><br><span class="line">	type: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const data = reactive&lt;IData&gt;&#123;</span><br><span class="line">	name: &#x27;winney&#x27;,</span><br><span class="line">	type: 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>企业级开发模式常用</p>
</li>
</ol>
<h4 id="接口返回字段："><a href="#接口返回字段：" class="headerlink" title="接口返回字段："></a>接口返回字段：</h4><ul>
<li>input:境外输入</li>
<li>noSymptom:无症状感染者</li>
<li>incrNoSymptom:新增</li>
<li>confirm:确诊</li>
<li>dead:死亡</li>
<li>heal:治愈</li>
<li>现有确诊数=累计确诊数-累计死亡数-累计治愈数</li>
<li>confirm-dead-heal</li>
</ul>
<p>总数：total</p>
<p>较昨日：today</p>
<h2 id="JS的实现"><a href="#JS的实现" class="headerlink" title="JS的实现"></a>JS的实现</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const data = reactive(&#123;</span><br><span class="line">    name: &quot;winney&quot;,</span><br><span class="line">    areaTree: [],</span><br><span class="line">    chinaDayList: [],</span><br><span class="line">    chinaTotal: &#123;&#125;,</span><br><span class="line">    china: [],</span><br><span class="line">    hbData: &#123;&#125;,</span><br><span class="line">    type: 1,</span><br><span class="line">    mapType: 1,</span><br><span class="line">    lineType: 1,</span><br><span class="line">    lastUpdateTime:&quot;&quot;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    axios(&#x27;/api/ug/api/wuhan/app/data/list-total?t=330415245809&#x27;)</span><br><span class="line">    .then(res =&gt; &#123;</span><br><span class="line">        const resData = res.data.data;</span><br><span class="line">        data.areaTree = resData.areaTree;</span><br><span class="line">        data.chinaDayList = resData.chinaDayList;</span><br><span class="line">        data.chinaTotal = resData.chinaTotal;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>为了避免使用数据时，每次都写<code>data.</code> , 对数据进行解构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123; chinaTotal &#125; = toRefs(data);</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt; &lt;strong class=&quot;red&quot;&gt;&#123;&#123;chinaTotal.total.input&#125;&#125;&lt;/strong&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>直接使用会报错：</p>
<p>原因，异步请求是在组件onMounted之后的。 在第一次渲染的时候，当时还没有chinaTotal的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul class=&quot;tab-content&quot; v-if=&quot;chinaTotal.total&quot;&gt;</span><br></pre></td></tr></table></figure>



<h4 id="Tab切换模块的功能"><a href="#Tab切换模块的功能" class="headerlink" title="Tab切换模块的功能"></a>Tab切换模块的功能</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 获取中国的数据</span><br><span class="line">data.china = data.areaTree.find((v) =&gt; v.id===&quot;0&quot;).children;</span><br><span class="line">// 获取湖北的数据</span><br><span class="line">data.hbData = data.china.find((v) =&gt; v.id === &quot;420000&quot;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123; chinaTotal, hbData &#125; = toRefs(data);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div class=&quot;tab-box&quot; v-if=&quot;chinaTotal.total&quot;&gt;  // 判断放在父盒子，做一次判断</span><br><span class="line"> 	</span><br><span class="line"> 	 &lt;!-- 全国疫情数据 --&gt;</span><br><span class="line"> 	 &lt;ul class=&quot;tab-content&quot; v-show=&quot;type=== 1&quot;&gt;</span><br><span class="line"> 	  &lt;!-- 湖北的数据 --&gt;</span><br><span class="line"> 	  &lt;ul class=&quot;tab-content&quot; v-show=&quot;type=== 2&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="tab切换事件"><a href="#tab切换事件" class="headerlink" title="tab切换事件"></a>tab切换事件</h4><p>动态绑定class的方法 <code>:class=&quot;&#123;active: type === 1&#125;&quot;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;tab-btn&quot; @click=&quot;tabChange(1)&quot; :class=&quot;&#123;active: type === 1&#125;&quot;&gt;全国疫情数据(含港澳台)&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;tab-btn&quot; @click=&quot;tabChange(2)&quot; :class=&quot;&#123;active: type === 2&#125;&quot;&gt;湖北疫情数据&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const tabChange = (type: number) =&gt; &#123;</span><br><span class="line">    data.type = type</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="TS的实现"><a href="#TS的实现" class="headerlink" title="TS的实现"></a>TS的实现</h2><p>不把跟业务无关的代码写在vue文件中</p>
<p>在src目录中新建一个type目录，存放所有的type</p>
<h4 id="1-src-type-index-ts"><a href="#1-src-type-index-ts" class="headerlink" title="1. src/type/index.ts"></a>1. <code>src/type/index.ts</code></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface IData&#123;</span><br><span class="line">    name: string;</span><br><span class="line">    type: number;</span><br><span class="line">&#125;</span><br><span class="line">// 导出的时候要使用type,而不是普通对象</span><br><span class="line">export type&#123;</span><br><span class="line">    IData</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>页面中使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; IData &#125; from &quot;../../type/index&quot;</span><br></pre></td></tr></table></figure>

<p>在src中新建pageJs目录，用于存放所有页面的逻辑js</p>
<h4 id="1-pageJs-index-ts"><a href="#1-pageJs-index-ts" class="headerlink" title="1. pageJs/index.ts"></a>1. <code>pageJs/index.ts</code></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; IData &#125; from &quot;../type/index&quot;</span><br></pre></td></tr></table></figure>



<h4 id="2-src-type-index-ts"><a href="#2-src-type-index-ts" class="headerlink" title="2. src/type/index.ts"></a>2. <code>src/type/index.ts</code></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface IData&#123;</span><br><span class="line">    name: string,</span><br><span class="line">    areaTree: any[],</span><br><span class="line">    chinaDayList: any[],</span><br><span class="line">    chinaTotal: any[],</span><br><span class="line">    china: any[],  // 中国的数据</span><br><span class="line">    hbData: Object, // 湖北的数据</span><br><span class="line">    type: number,</span><br><span class="line">    mapType: number,</span><br><span class="line">    lineType: number,</span><br><span class="line">    lastUpdateTime:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export type&#123;</span><br><span class="line">    IData</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>VSCode中TS实现接口的快捷方式：</p>
<p><img src="https://raw.githubusercontent.com/winney07/Images/main/winney07.github.io/vue3-vite-%E7%96%AB%E6%83%85/Snipaste_2022-08-01_16-49-24.png" alt="VSCode中ts实现接口"></p>
<p><img src="https://raw.githubusercontent.com/winney07/Images/main/winney07.github.io/vue3-vite-%E7%96%AB%E6%83%85/Snipaste_2022-08-01_16-50-16.png" alt="VScode中ts接口实现"></p>
<h4 id="2-pageJs-index-ts"><a href="#2-pageJs-index-ts" class="headerlink" title="2. pageJs/index.ts"></a>2. <code>pageJs/index.ts</code></h4><p>优点：可重复使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; IData &#125; from &quot;../type/index&quot;</span><br><span class="line"></span><br><span class="line">class InteData implements IData &#123;</span><br><span class="line">    name: string =&quot;&quot;</span><br><span class="line">    areaTree: any[] = []</span><br><span class="line">    chinaDayList: any[] = []</span><br><span class="line">    chinaTotal: any[] = []</span><br><span class="line">    china: any[]= []</span><br><span class="line">    hbData: Object = &#123;&#125;</span><br><span class="line">    type: number = 1</span><br><span class="line">    mapType: number = 1</span><br><span class="line">    lineType: number = 1</span><br><span class="line">    lastUpdateTime: string =&quot;&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export &#123;</span><br><span class="line">    InteData</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-页面中使用"><a href="#3-页面中使用" class="headerlink" title="3.页面中使用"></a>3.页面中使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; InteData &#125; from &#x27;../../pageJs/index&#x27;</span><br><span class="line"> </span><br><span class="line">const data = reactive(new InteData())</span><br></pre></td></tr></table></figure>

<h4 id="4-请求数据方法封装"><a href="#4-请求数据方法封装" class="headerlink" title="4.请求数据方法封装"></a>4.请求数据方法封装</h4><p>注：setup函数中是不支持异步的</p>
<h5 id="4-1-pageJs-index-ts"><a href="#4-1-pageJs-index-ts" class="headerlink" title="4.1  pageJs/index.ts"></a>4.1  <code>pageJs/index.ts</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line">import type &#123; IData &#125; from &quot;../type/index&quot;</span><br><span class="line"></span><br><span class="line">class InteData implements IData &#123;</span><br><span class="line">    name: string =&quot;&quot;</span><br><span class="line">    areaTree: any[] = []</span><br><span class="line">    chinaDayList: any[] = []</span><br><span class="line">    chinaTotal: any[] = []</span><br><span class="line">    china: any[]= []</span><br><span class="line">    hbData: Object = &#123;&#125;</span><br><span class="line">    type: number = 1</span><br><span class="line">    mapType: number = 1</span><br><span class="line">    lineType: number = 1</span><br><span class="line">    lastUpdateTime: string =&quot;&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const initDataFun = (data:InteData) =&gt; &#123;</span><br><span class="line">    axios(&#x27;/api/ug/api/wuhan/app/data/list-total?t=330415245809&#x27;)</span><br><span class="line">    .then(res =&gt; &#123;</span><br><span class="line">        const resData = res.data.data;</span><br><span class="line">        data.areaTree = resData.areaTree;</span><br><span class="line">        data.chinaDayList = resData.chinaDayList;</span><br><span class="line">        data.chinaTotal = resData.chinaTotal;</span><br><span class="line"></span><br><span class="line">        // 获取中国的数据</span><br><span class="line">        data.china = data.areaTree.find((v) =&gt; v.id===&quot;0&quot;).children;</span><br><span class="line">        // 获取湖北的数据</span><br><span class="line">        data.hbData = data.china.find((v) =&gt; v.id === &quot;420000&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export &#123;</span><br><span class="line">    InteData,</span><br><span class="line">    initDataFun</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-2-页面中使用"><a href="#4-2-页面中使用" class="headerlink" title="4.2 页面中使用"></a>4.2 页面中使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; InteData, initDataFun &#125; from &#x27;../../pageJs/index&#x27;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    initDataFun(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="Echarts的使用"><a href="#Echarts的使用" class="headerlink" title="Echarts的使用"></a><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/index.html">Echarts</a>的使用</h2><p><a target="_blank" rel="noopener" href="https://echarts.apache.org/examples/zh/editor.html?c=map-HK">地图图表</a></p>
<p><a target="_blank" rel="noopener" href="https://echarts.apache.org/handbook/zh/basics/import">在项目中引入 Apache ECharts</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i echarts --save</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 地图 --&gt;</span><br><span class="line">&lt;div class=&quot;map-box&quot;&gt;</span><br><span class="line">    &lt;div </span><br><span class="line">        :class=&quot;mapType === 1 ? &#x27;to-left&#x27; : &#x27;to-right&#x27;&quot;</span><br><span class="line">        id=&quot;map&quot;</span><br><span class="line">    &gt;&lt;/div&gt;</span><br><span class="line">    &lt;div </span><br><span class="line">        :class=&quot;mapType === 1 ? &#x27;to-left&#x27; : &#x27;to-right&#x27;&quot;</span><br><span class="line">        id=&quot;map2&quot;</span><br><span class="line">    &gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-pageJs-index-ts-1"><a href="#2-pageJs-index-ts-1" class="headerlink" title="2.pageJs/index.ts"></a>2.<code>pageJs/index.ts</code></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line"></span><br><span class="line">type EChartsOption = echarts.EChartsOption;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const initDataFun = (data:InteData) =&gt; &#123;</span><br><span class="line">    var mapDom = document.getElementById(&#x27;map&#x27;)!;</span><br><span class="line">    var mapDom2 = document.getElementById(&#x27;map2&#x27;)!;</span><br><span class="line"></span><br><span class="line">    var optionMap: EChartsOption = &#123;</span><br><span class="line">        title:&#123;</span><br><span class="line">            subtext: &#x27;单击省份可查看病例数&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123; // 提示框</span><br><span class="line">            trigger: &#x27;item&#x27;,</span><br><span class="line">            formatter: &#x27;现有确诊病例&lt;br/&gt;&#123;b&#125;: &#123;c&#125;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        visualMap:&#123;</span><br><span class="line">            show:false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var myMap = echarts.init(mapDom);</span><br><span class="line">    var myMap2 = echarts.init(mapDom2);</span><br><span class="line">    myMap.showLoading();</span><br><span class="line">    myMap2.showLoading();</span><br><span class="line">   ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>加上自带的loading</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myMap = echarts.init(mapDom);</span><br><span class="line">var myMap2 = echarts.init(mapDom2);</span><br><span class="line">myMap.showLoading();</span><br><span class="line">myMap2.showLoading();</span><br></pre></td></tr></table></figure>

<h4 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 地图数据</span><br><span class="line">let mapData:any[] = []</span><br><span class="line">data.china.map((v:any) =&gt; &#123;</span><br><span class="line">    mapData.push(&#123;</span><br><span class="line">        name: v.name,</span><br><span class="line">        value: v.total.confirm - v.total.dead - v.total.heal || 0,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-1-完整代码"><a href="#2-1-完整代码" class="headerlink" title="2.1.完整代码"></a>2.1.完整代码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">const initDataFun = (data:InteData) =&gt; &#123;</span><br><span class="line">    var mapDom = document.getElementById(&#x27;map&#x27;)!;</span><br><span class="line">    var mapDom2 = document.getElementById(&#x27;map2&#x27;)!;</span><br><span class="line"></span><br><span class="line">    var optionMap: EChartsOption = &#123;</span><br><span class="line">        title:&#123;</span><br><span class="line">            subtext: &#x27;单击省份可查看病例数&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123; // 提示框</span><br><span class="line">            trigger: &#x27;item&#x27;,</span><br><span class="line">            formatter: &#x27;现有确诊病例&lt;br/&gt;&#123;b&#125;: &#123;c&#125;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        visualMap:&#123;</span><br><span class="line">            show:false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 将重复的配置抽出来</span><br><span class="line">    var series = &#123;</span><br><span class="line">        type: &quot;map&quot;,</span><br><span class="line">        map: &quot;china&quot;,</span><br><span class="line">        colorBy: &quot;series&quot;,</span><br><span class="line">        zoom: 1.3,</span><br><span class="line">        top: 80,</span><br><span class="line">        label:&#123;</span><br><span class="line">            show: true,</span><br><span class="line">            color: &quot;#333&quot;,</span><br><span class="line">            fontSize: 10,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var myMap = echarts.init(mapDom);</span><br><span class="line">    var myMap2 = echarts.init(mapDom2);</span><br><span class="line">    myMap.showLoading();</span><br><span class="line">    myMap2.showLoading();</span><br><span class="line"></span><br><span class="line">    axios(&#x27;/api/ug/api/wuhan/app/data/list-total?t=330415245809&#x27;)</span><br><span class="line">    .then(res =&gt; &#123;</span><br><span class="line">        const resData = res.data.data;</span><br><span class="line">        data.areaTree = resData.areaTree;</span><br><span class="line">        data.chinaDayList = resData.chinaDayList;</span><br><span class="line">        data.chinaTotal = resData.chinaTotal;</span><br><span class="line"></span><br><span class="line">        // 获取中国的数据</span><br><span class="line">        data.china = data.areaTree.find((v) =&gt; v.id===&quot;0&quot;).children;</span><br><span class="line">        // 获取湖北的数据</span><br><span class="line">        data.hbData = data.china.find((v) =&gt; v.id === &quot;420000&quot;)</span><br><span class="line"></span><br><span class="line">        // 地图数据</span><br><span class="line">        let mapData:any[] = []</span><br><span class="line">        data.china.map((v:any) =&gt; &#123;</span><br><span class="line">            mapData.push(&#123;</span><br><span class="line">                name: v.name,</span><br><span class="line">                value: v.total.confirm - v.total.dead - v.total.heal || 0,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        myMap.hideLoading();</span><br><span class="line">        myMap.setOption(&#123;</span><br><span class="line">            ...optionMap, </span><br><span class="line">            series:&#123;</span><br><span class="line">                ...series, </span><br><span class="line">                data: mapData,   // 数据源</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-引入china-json文件"><a href="#3-引入china-json文件" class="headerlink" title="3.引入china.json文件"></a>3.引入china.json文件</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/seeeeeeeeeee/article/details/121495485?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-4-121495485-null-null.pc_agg_new_rank&utm_term=china.json%20geojson&spm=1000.2123.3001.4430">【echarts 中国地图】vue实现中国地图，省份居中china.json文件下载</a></p>
<p>在pageJs/index.ts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import chinaJson from &#x27;../assets/china.json&#x27;;</span><br><span class="line"></span><br><span class="line">echarts.registerMap(&quot;china&quot;, (chinaJson as any))</span><br></pre></td></tr></table></figure>

<h2 id="List组件封装"><a href="#List组件封装" class="headerlink" title="List组件封装"></a>List组件封装</h2><h4 id="子组件List组件："><a href="#子组件List组件：" class="headerlink" title="子组件List组件："></a>子组件List组件：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        数据列表组件</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">    list: Array,</span><br><span class="line">    msg: String,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(props.list)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&#x27;less&#x27; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="重点1：处理初始化会报错问题-判断是否渲染子组件"><a href="#重点1：处理初始化会报错问题-判断是否渲染子组件" class="headerlink" title="重点1：处理初始化会报错问题-判断是否渲染子组件"></a>重点1：处理初始化会报错问题-判断是否渲染子组件</h4><p>子组件的setup会在父组件的onMounted之前执行，所以传参的时候，要进行判断，是否渲染子组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import List from &#x27;../../components/situation/List.vue&#x27;;</span><br><span class="line"></span><br><span class="line">&lt;List v-if=&quot;china.length &gt; 0&quot; :list=&quot;china&quot; :msg=&quot;&#x27;中国疫情&#x27;&quot;/&gt;</span><br></pre></td></tr></table></figure>



<h4 id="动态数据传值"><a href="#动态数据传值" class="headerlink" title="动态数据传值"></a>动态数据传值</h4><p>动态数据，这样写会报错：<code>:msg=&quot;中国疫情&quot;</code></p>
<p>要加上引号：<code>:msg=&quot;&#39;中国疫情&#39;&quot;</code></p>
<h4 id="props里面的数据无需解构，可以直接使用"><a href="#props里面的数据无需解构，可以直接使用" class="headerlink" title="props里面的数据无需解构，可以直接使用"></a>props里面的数据无需解构，可以直接使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const props = defineProps(&#123;</span><br><span class="line">    list: Array,</span><br><span class="line">    msg: String,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#123;&#123;list&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件自调用——递归"><a href="#组件自调用——递归" class="headerlink" title="组件自调用——递归"></a>组件自调用——递归</h4><h4 id="重点2：组件自调用，要写上name值"><a href="#重点2：组件自调用，要写上name值" class="headerlink" title="重点2：组件自调用，要写上name值"></a>重点2：组件自调用，要写上name值</h4><p><code>List.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup name=&quot;List&quot; lang=&#x27;ts&#x27;&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;list-box&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;info-title info&quot;&gt;</span><br><span class="line">            &lt;p&gt;地区&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;现有确诊&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;确诊&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;死亡&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;治愈&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;list&quot; v-for=&quot;i in list&quot; :key=&quot;i.id&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;p-box&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info&quot; @click=&quot;getShowChildren(i.id)&quot;&gt;</span><br><span class="line">                    &lt;p&gt;&#123;&#123;i.name&#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;&#123;&#123;i.total.confirm - i.today.dead - i.today.heal&#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;</span><br><span class="line">                        &lt;span&gt;&#123;&#123;i.total.confirm&#125;&#125;&lt;/span&gt;</span><br><span class="line">                        &lt;span&gt;较昨日&#123;&#123;i.today.confirm&#125;&#125;&lt;/span&gt;</span><br><span class="line">                    &lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;&#123;&#123;i.total.dead&#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;&#123;&#123;i.total.heal&#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                  &lt;!-- 世界数据不展示children --&gt;</span><br><span class="line">                &lt;div v-if=&quot;showChildren&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;children&quot; v-show=&quot;data.isShowChildren == i.id&quot;&gt;</span><br><span class="line">                        &lt;List :list=&quot;i.children&quot;/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="重点3：定义子组件接收的属性"><a href="#重点3：定义子组件接收的属性" class="headerlink" title="重点3：定义子组件接收的属性"></a>重点3：定义子组件接收的属性</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup name=&quot;List&quot; lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">    list: Array,</span><br><span class="line">    showChildren: Boolean  // 是否显示children数据 （中国病例显示，世界病例不显示—）</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props.list)</span><br><span class="line"></span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">    isShowChildren: &quot;&quot;    // 是否有children</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const getShowChildren = (id: string) =&gt; &#123;</span><br><span class="line">    data.isShowChildren == id</span><br><span class="line">    ? (data.isShowChildren = &quot;&quot;)</span><br><span class="line">    : (data.isShowChildren = id)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="文字溢出不换行显示"><a href="#文字溢出不换行显示" class="headerlink" title="文字溢出不换行显示"></a>文字溢出不换行显示</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">white-space: nowrap;</span><br></pre></td></tr></table></figure>



<h3 id="懒加载——下拉刷新上拉加载"><a href="#懒加载——下拉刷新上拉加载" class="headerlink" title="懒加载——下拉刷新上拉加载"></a>懒加载——下拉刷新上拉加载</h3><p>国际病例数据较多——使用懒加载方式。</p>
<h4 id="上拉加载下拉刷新的组件-ScrollCom"><a href="#上拉加载下拉刷新的组件-ScrollCom" class="headerlink" title="上拉加载下拉刷新的组件-ScrollCom"></a>上拉加载下拉刷新的组件-ScrollCom</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;!-- ref=&quot;scrollEl&quot; 这里scrollEl 不是一个变量，是字符串--&gt;</span><br><span class="line">        &lt;!-- :ref=&quot;scrollEl&quot; 这里scrollEl 是一个变量--&gt;</span><br><span class="line">        &lt;!-- ref不会被渲染到DOM元素上去， 是一个内部属性，</span><br><span class="line">            用于与data中的属性进行绑定，如果在data中找到了对应名称的响应式的key值(属性)时,</span><br><span class="line">            当这个元素渲染完之后，会把这个元素的指针给到data中与之相同的key值的对象上去--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 绑定滚动事件：@scroll --&gt;</span><br><span class="line">        &lt;div </span><br><span class="line">            @scroll=&quot;scrollEvent&quot;</span><br><span class="line">            ref=&quot;scrollEl&quot; </span><br><span class="line">            class=&quot;scrollEl&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;loadingBox&quot; v-if=&quot;touchstartTitleShow&quot;&gt;释放可刷新...&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;loadingBox&quot; v-if=&quot;touchendTitleShow&quot;&gt;加载中...&lt;/div&gt;</span><br><span class="line">            &lt;!-- 插槽——————这个组件可以被多个组件使用 --&gt;</span><br><span class="line">            &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;div v-if=&quot;!isScroll&quot; class=&quot;&quot;&gt;&#123;&#123;endText&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; reactive, toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">    distance: &#123;</span><br><span class="line">        type: Number,</span><br><span class="line">        default: 100</span><br><span class="line">    &#125;,</span><br><span class="line">    isScroll: Boolean,</span><br><span class="line">    endText: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#x27;没有更多了&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"> const $emit = defineEmits([&#x27;getList&#x27;])</span><br><span class="line"></span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">    scrollEl: null,   // 用来装实例对象，  用于ref获取元素对象</span><br><span class="line">    startText: &quot;释放可刷新&quot;,</span><br><span class="line">    scrollTop: 0,</span><br><span class="line">    scrollY: 0,</span><br><span class="line">    translateY: 0,</span><br><span class="line">    touchstartTitleShow: false, // 控制手指按下屏幕的title显示</span><br><span class="line">    touchendTitleShow: false,   // 控制手指离开屏幕的title显示</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let &#123; </span><br><span class="line">    scrollEl,</span><br><span class="line">    startText,</span><br><span class="line">    scrollTop,</span><br><span class="line">    scrollY,</span><br><span class="line">    translateY,</span><br><span class="line">    touchstartTitleShow,</span><br><span class="line">    touchendTitleShow,</span><br><span class="line"> &#125; = toRefs(data);</span><br><span class="line"></span><br><span class="line">// 滚动事件</span><br><span class="line"> const scrollEvent = (e:any) =&gt;&#123;</span><br><span class="line">    data.scrollTop = e.srcElement.scrollTop;</span><br><span class="line">    if(!props.isScroll) return;</span><br><span class="line">    if(</span><br><span class="line">        data.scrollTop + e.srcElement.offsetHeight &gt; </span><br><span class="line">        e.srcElement.scrollHeight - props.distance</span><br><span class="line">    )&#123;</span><br><span class="line">        // 获取下一页的数据————子组件给父组件传值</span><br><span class="line">        $emit(&#x27;getList&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="使用ScrollCom"><a href="#使用ScrollCom" class="headerlink" title="使用ScrollCom"></a>使用ScrollCom</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;ScrollCom </span><br><span class="line">    :distance=&quot;100&quot;</span><br><span class="line">    :isScroll=&quot;true&quot;</span><br><span class="line">    @getList=&quot;getList&quot;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;List </span><br><span class="line">    	v-if=&quot;areaTree.length &gt; 0&quot;</span><br><span class="line">    	:showChildren=&quot;false&quot; </span><br><span class="line">    	:list=&quot;areaTree&quot; </span><br><span class="line">    	:msg=&quot;&#x27;世界疫情&#x27;&quot;/&gt;</span><br><span class="line">&lt;/ScrollCom&gt;</span><br></pre></td></tr></table></figure>

<h4 id="对分页加载的数据进行拆解"><a href="#对分页加载的数据进行拆解" class="headerlink" title="对分页加载的数据进行拆解"></a>对分页加载的数据进行拆解</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const getPageList = (list:any[]) =&gt; &#123;</span><br><span class="line">    const arr:Array&lt;any[]&gt;[] = [];  // 二维数组</span><br><span class="line">    for(let index = 0; index &lt; list.length; index += 30)&#123;</span><br><span class="line">        arr.push(list.slice(index, index + 30))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 对分页加载的数据进行拆解</span><br><span class="line">// 结构 如：[[1-30][31-60]....] 1-30条数据为第一页，31到60为第二页</span><br><span class="line">data.areaTree = getPageList(resData.areaTree);</span><br><span class="line">data.showList = data.areaTree[0];    // 第一页数据</span><br></pre></td></tr></table></figure>

<p>第一页数据：<code>:list=&quot;showList&quot;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ScrollCom </span><br><span class="line">    :distance=&quot;100&quot;</span><br><span class="line">    :isScroll=&quot;true&quot;</span><br><span class="line">    @getList=&quot;getList&quot;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;List v-if=&quot;showList.length &gt; 0&quot; :showChildren=&quot;false&quot; :list=&quot;showList&quot; :msg=&quot;&#x27;世界疫情&#x27;&quot;/&gt;</span><br><span class="line">&lt;/ScrollCom&gt;</span><br></pre></td></tr></table></figure>

<h5 id="处理上拉加载报错："><a href="#处理上拉加载报错：" class="headerlink" title="处理上拉加载报错："></a>处理上拉加载报错：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: data.areaTree[page] is not iterable (cannot read property undefined)</span><br></pre></td></tr></table></figure>

<p>原因：页数等于数据长度仍去获取数据； 解决：页数等于数据长度，就显示“没有更多”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(page === data.areaTree.length - 1) &#123;</span><br><span class="line">    data.isScroll = false;  // 不可下拉加载数据</span><br><span class="line">    return;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h4><ul>
<li>touchstart</li>
<li>touchmove</li>
<li>touchend</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div </span><br><span class="line">    @scroll=&quot;scrollEvent&quot;</span><br><span class="line">    @touchstart=&quot;touchstart&quot;</span><br><span class="line">    @touchmove=&quot;touchmove&quot;</span><br><span class="line">    @touchend=&quot;touchend&quot;</span><br><span class="line">    ref=&quot;scrollEl&quot; </span><br><span class="line">    :style=&quot;&#123;top: `$&#123;translateY&#125;px`&#125;&quot;</span><br><span class="line">    class=&quot;scroll-box&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;loadingBox&quot; v-if=&quot;touchstartTitleShow&quot;&gt;释放可刷新...&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;loadingBox&quot; v-if=&quot;touchendTitleShow&quot;&gt;加载中...&lt;/div&gt;</span><br><span class="line">    &lt;!-- 插槽——————这个组件可以被多个组件使用 --&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;div v-if=&quot;!isScroll&quot; class=&quot;end-text&quot;&gt;&#123;&#123;endText&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> // 手指触碰到屏幕</span><br><span class="line"> const touchstart = (e:any) =&gt; &#123;</span><br><span class="line">    console.log(e.targetTouches[0])</span><br><span class="line">    let y = e.targetTouches[0].pageY;</span><br><span class="line">    data.startY = y;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">// 手指开始滑动</span><br><span class="line">const touchmove = (e:any) =&gt; &#123;</span><br><span class="line">    let y = e.targetTouches[0].pageY;</span><br><span class="line">    if(y &gt; data.startY &amp;&amp; data.scrollTop ==0) &#123;</span><br><span class="line">        data.touchstartTitleShow = true;</span><br><span class="line">        // 如果当前移动距离大于初始点击坐标，则视为下拉，并且要处于顶部</span><br><span class="line">        data.translateY = (y - data.startY) / 2;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        data.touchstartTitleShow = false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 手指松开</span><br><span class="line">const touchend = (e:any) =&gt; &#123;</span><br><span class="line">    let y = e.changedTouches[0].pageY;</span><br><span class="line">    if(y &gt; data.startY) &#123;</span><br><span class="line">        data.translateY = 0;</span><br><span class="line">        data.touchstartTitleShow = false;</span><br><span class="line">        data.touchendTitleShow = true;</span><br><span class="line">        $emit(&#x27;refreshFun&#x27;, () =&gt; &#123;</span><br><span class="line">            // 更新完数据的回调</span><br><span class="line">            data.touchendTitleShow = false;</span><br><span class="line">        &#125;)</span><br><span class="line">        data.startY = 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const $emit = defineEmits([&#x27;getList&#x27;,&#x27;refreshFun&#x27;])</span><br></pre></td></tr></table></figure>

<h4 id="下拉刷新方法及回调处理"><a href="#下拉刷新方法及回调处理" class="headerlink" title="下拉刷新方法及回调处理"></a>下拉刷新方法及回调处理</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 下拉刷新方法及 回调处理</span><br><span class="line">const refreshFun = (fun:Function) =&gt;&#123;</span><br><span class="line">    // 注：要将initDataFun改为promise函数  即使用async await</span><br><span class="line">    </span><br><span class="line">    initDataFun(data).then(() =&gt; &#123;</span><br><span class="line">        page = 0;</span><br><span class="line">        data.isScroll = true;</span><br><span class="line">        fun();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：要将initDataFun函数改为返回promise</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const initDataFun = async (data:InteData) =&gt; &#123;</span><br><span class="line">	....</span><br><span class="line">	let res = await axios(&#x27;/api/ug/api/wuhan/app/data/list-total?t=330415245809&#x27;)</span><br><span class="line">	....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="下拉的空白区域的宽度"><a href="#下拉的空白区域的宽度" class="headerlink" title="下拉的空白区域的宽度"></a>下拉的空白区域的宽度</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:style=&quot;&#123;top: `$&#123;translateY&#125;px`&#125;&quot;</span><br></pre></td></tr></table></figure>



<h4 id="折线图，y轴上的刻度数据被挡住，使用以下方法调整样式"><a href="#折线图，y轴上的刻度数据被挡住，使用以下方法调整样式" class="headerlink" title="折线图，y轴上的刻度数据被挡住，使用以下方法调整样式"></a>折线图，y轴上的刻度数据被挡住，使用以下方法调整样式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yAxis: &#123;</span><br><span class="line">    axisLabel:&#123;</span><br><span class="line">      margin: -20,  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="打包上线"><a href="#打包上线" class="headerlink" title="打包上线"></a>打包上线</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37656005/article/details/119818759">关于vue3.0 + vite + ts 打包的坑</a></p>
<p><a target="_blank" rel="noopener" href="https://www.modb.pro/db/114083">记一次 vue-tsc 引起的错误</a></p>
<p>打包报错：</p>
<p>将package.json的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;build&quot;: &quot;vue-tsc --noEmit &amp;&amp; vite build&quot;,</span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;build&quot;: &quot;vite build&quot;,</span><br></pre></td></tr></table></figure>

<h5 id="vue3-0-vite-ts项目搭建-分环境打包-四"><a href="#vue3-0-vite-ts项目搭建-分环境打包-四" class="headerlink" title="vue3.0+vite+ts项目搭建-分环境打包(四)"></a><a target="_blank" rel="noopener" href="https://www.shuzhiduo.com/A/nAJvZxqGJr/">vue3.0+vite+ts项目搭建-分环境打包(四)</a></h5><p><a target="_blank" rel="noopener" href="https://rollupjs.org/guide/en/#outputmanualchunks">rollup.js</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45536484/article/details/120041748">ECharts y轴（yAxis）</a></p>
<p>备注：完整代码在<code>Gitee</code>中<code> Vue3_demo/vue3-vite-yiqing</code></p>
<p>备注：获取疫情数据的接口：<a target="_blank" rel="noopener" href="https://c.m.163.com/api/ug/api/wuhan/app/data/list-total?t=330415245809">https://c.m.163.com/api/ug/api/wuhan/app/data/list-total?t=330415245809</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1620882">解决vue本地环境跨域请求正常，版本打包后跨域代理不起作用，请求不到数据的方法</a></p>
<p><a target="_blank" rel="noopener" href="https://www.qb5200.com/article/164553.html">vue项目打包后请求地址错误/打包后跨域操作</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43110440/article/details/124882324"><strong>vite 打包后本地不能访问</strong></a></p>
<p><a target="_blank" rel="noopener" href="https://www.it610.com/article/1506847191577198592.htm">vue3+vite项目配置axios及跨域</a></p>
<h4 id="VITE-VUE3-跨域环境变量配置"><a href="#VITE-VUE3-跨域环境变量配置" class="headerlink" title="VITE+VUE3 跨域环境变量配置"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/xm2395939/article/details/125140690?app_version=5.7.0&csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22125140690%22,%22source%22:%22winney07%22%7D&ctrtid=shInB&utm_source=app">VITE+VUE3 跨域环境变量配置</a></h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lsjweiyi/article/details/124645896">神坑——后端允许了跨域但是前端（vue3+vite+axios）仍然提示跨域</a></p>
<h4 id="axios封装请求"><a href="#axios封装请求" class="headerlink" title="axios封装请求"></a><a target="_blank" rel="noopener" href="https://www.it610.com/article/1506847191577198592.htm">axios封装请求</a></h4><h4 id="使用vite如何配置跨域，以及环境配置"><a href="#使用vite如何配置跨域，以及环境配置" class="headerlink" title="使用vite如何配置跨域，以及环境配置"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/jch923798729/article/details/123658250">使用vite如何配置跨域，以及环境配置</a></h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_62152730/article/details/125082425">vue部署Linux上 跨域问题</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var http = axios.create(&#123;</span><br><span class="line">  timeout: 1000 * 20,</span><br><span class="line">  baseURL: import.meta.env.DEV? &#x27;&#x27;: import.meta.env.VITE_BASE_URL</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server: &#123;</span><br><span class="line">  port: 4000, // 设置服务启动端口号</span><br><span class="line">  open: true, // 设置服务启动时是否自动打开浏览器</span><br><span class="line">  cors: true, // 允许跨域</span><br><span class="line"></span><br><span class="line">  // 设置代理，根据我们项目实际情况配置</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    &#x27;/api&#x27;: &#123;</span><br><span class="line">      target: env.VITE_BASE_URL, // 环境变量</span><br><span class="line">      changeOrigin: true,</span><br><span class="line">      secure: false,</span><br><span class="line">      rewrite: (path) =&gt; path.replace(&#x27;/api/&#x27;, &#x27;&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_62152730?type=blog">https://blog.csdn.net/m0_62152730?type=blog</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/06/17/Pinia/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="winney">
      <meta itemprop="description" content="Doing is better than saying.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="winney">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/17/Pinia/" class="post-title-link" itemprop="url">Pinia</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-17 11:12:54" itemprop="dateCreated datePublished" datetime="2022-06-17T11:12:54+08:00">2022-06-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-24 18:09:23" itemprop="dateModified" datetime="2022-08-24T18:09:23+08:00">2022-08-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia-官网</a></p>
<p><a target="_blank" rel="noopener" href="https://stackblitz.com/github/piniajs/example-vue-3-vite?file=index.html">Pinia-Demo</a></p>
<h4 id="pinia2入门使用"><a href="#pinia2入门使用" class="headerlink" title="pinia2入门使用"></a><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d42b9c57cbac">pinia2入门使用</a></h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="winney"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">winney</p>
  <div class="site-description" itemprop="description">Doing is better than saying.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">132</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">84</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.xiaochao.me/" title="https:&#x2F;&#x2F;www.xiaochao.me&#x2F;" rel="noopener" target="_blank">小超</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://winney07.github.io/" title="https:&#x2F;&#x2F;winney07.github.io&#x2F;" rel="noopener" target="_blank">winney07</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">winney07</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
