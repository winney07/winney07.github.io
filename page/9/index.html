<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Doing is better than saying.">
<meta property="og:type" content="website">
<meta property="og:title" content="winney">
<meta property="og:url" content="http://example.com/page/9/index.html">
<meta property="og:site_name" content="winney">
<meta property="og:description" content="Doing is better than saying.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="winney">
<meta property="article:tag" content="winneyBlog   博客">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>winney</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">winney</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">It is never too old to learn.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <img alt="winney" src="/images/blog-head.jpg">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/10/ad-manage-react-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="winney">
      <meta itemprop="description" content="Doing is better than saying.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="winney">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/10/ad-manage-react-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">ad_manage_react-项目笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-10 11:31:33" itemprop="dateCreated datePublished" datetime="2021-10-10T11:31:33+08:00">2021-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-30 13:18:11" itemprop="dateModified" datetime="2024-10-30T13:18:11+08:00">2024-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">项目笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/React/" itemprop="url" rel="index"><span itemprop="name">React</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="启动项目注意事项："><a href="#启动项目注意事项：" class="headerlink" title="启动项目注意事项："></a>启动项目注意事项：</h3><ol>
<li>启动Apifox应用——项目的mock接口</li>
</ol>
<h3 id="项目目录结构"><a href="#项目目录结构" class="headerlink" title="项目目录结构"></a>项目目录结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">│  App.js</span><br><span class="line">│  App.less</span><br><span class="line">│  App.test.js</span><br><span class="line">│  index.css</span><br><span class="line">│  index.js</span><br><span class="line">│  reportWebVitals.js</span><br><span class="line">│  setupTests.js</span><br><span class="line">│</span><br><span class="line">├─api					——接口文件（分模块）</span><br><span class="line">│      source.js		——素材管理模块相关Api</span><br><span class="line">│      user.js			——用户模块相关Api</span><br><span class="line">│</span><br><span class="line">├─app								——app公用</span><br><span class="line">│      BreadcrumbMap.jsx			——面包屑相关配置</span><br><span class="line">│      leftMenus.js					——左侧导航栏相关数据</span><br><span class="line">│      leftMenus—对应旧的LeftNav.js	  ——antd左侧导航旧版的做法</span><br><span class="line">│      rootReducers.js				——reducer的集合</span><br><span class="line">│      router.js					——路由配置</span><br><span class="line">│      store.js						——store的配置</span><br><span class="line">│</span><br><span class="line">├─assets							——静态资源</span><br><span class="line">│  ├─css</span><br><span class="line">│  │      style.css</span><br><span class="line">│  │</span><br><span class="line">│  ├─images</span><br><span class="line">│  │      header.jpeg</span><br><span class="line">│  │</span><br><span class="line">│  └─less							</span><br><span class="line">│          common.less				——公用样式</span><br><span class="line">│          cover_antd.less			——覆盖antd默认样式的样式文件</span><br><span class="line">│          style.less				——其他样式</span><br><span class="line">│</span><br><span class="line">├─components						——组件集合</span><br><span class="line">│  │  Bottom.jsx					——页面底部</span><br><span class="line">│  │  EditableTable.jsx				——可编辑表格</span><br><span class="line">│  │  LeftNav-旧的使用方法.jsx</span><br><span class="line">│  │  LeftNav.jsx					——左侧导航栏组件</span><br><span class="line">│  │  Top.jsx						——页面顶部</span><br><span class="line">│  │</span><br><span class="line">│  └─charts							——图表相关组件</span><br><span class="line">│          LineChart.jsx			——线性图组件</span><br><span class="line">│</span><br><span class="line">├─pages								——页面组件（根据模块划分）</span><br><span class="line">│  ├─agent</span><br><span class="line">│  │      Account.jsx</span><br><span class="line">│  │      AddAccount.jsx</span><br><span class="line">│  │      AddAgent.jsx</span><br><span class="line">│  │      Agent.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─dashboard</span><br><span class="line">│  │      Overview.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─group</span><br><span class="line">│  │      AddGroup.jsx</span><br><span class="line">│  │      Group.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─home</span><br><span class="line">│  │      Container.jsx</span><br><span class="line">│  │      Home.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─login</span><br><span class="line">│  │      Login.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─manage</span><br><span class="line">│  │      Customevent.jsx</span><br><span class="line">│  │      Datacb.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─product</span><br><span class="line">│  │      AddProduct.jsx</span><br><span class="line">│  │      EditProduct.jsx</span><br><span class="line">│  │      Product.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─source</span><br><span class="line">│  │      AddSource.jsx</span><br><span class="line">│  │      EditSource.jsx</span><br><span class="line">│  │      Source.jsx</span><br><span class="line">│  │      SourceUpload.jsx</span><br><span class="line">│  │</span><br><span class="line">│  ├─tool</span><br><span class="line">│  │      Attribute.jsx</span><br><span class="line">│  │      Logtool.jsx</span><br><span class="line">│  │</span><br><span class="line">│  └─user</span><br><span class="line">│          EditPassword.jsx</span><br><span class="line">│</span><br><span class="line">├─reducers							——reducers相关（根据模块划分）</span><br><span class="line">│      userSlice.js					——用户模块相关reducer处理</span><br><span class="line">│</span><br><span class="line">└─utils								——自定义相关文件</span><br><span class="line">        fetchUtil.js				——接口请求相关封装</span><br></pre></td></tr></table></figure>



<h2 id="项目笔记"><a href="#项目笔记" class="headerlink" title="项目笔记"></a>项目笔记</h2><p><a target="_blank" rel="noopener" href="https://ant.design/docs/react/use-with-create-react-app-cn">在 create-react-app 中使用</a></p>
<p>注：先引入less，免得后面再来配置的时候，由于依赖包之间的版本之间存在冲突问题。</p>
<h4 id="安装和初始化"><a href="#安装和初始化" class="headerlink" title="安装和初始化"></a>安装和初始化</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create react-app ad_manage_react</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd antd-demo</span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>

<h5 id="安装并引入-antd"><a href="#安装并引入-antd" class="headerlink" title="安装并引入 antd"></a>安装并引入 antd</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd</span><br></pre></td></tr></table></figure>

<h5 id="安装-craco-并修改-package-json-里的-scripts-属性"><a href="#安装-craco-并修改-package-json-里的-scripts-属性" class="headerlink" title="安装 craco 并修改 package.json 里的 scripts 属性"></a>安装 craco 并修改 <code>package.json</code> 里的 <code>scripts</code> 属性</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @craco/craco</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* package.json */</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">-   &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">-   &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line">-   &quot;test&quot;: &quot;react-scripts test&quot;,</span><br><span class="line">+   &quot;start&quot;: &quot;craco start&quot;,</span><br><span class="line">+   &quot;build&quot;: &quot;craco build&quot;,</span><br><span class="line">+   &quot;test&quot;: &quot;craco test&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在项目根目录创建一个 <code>craco.config.js</code> 用于修改默认配置</p>
<h5 id="自定义主题"><a href="#自定义主题" class="headerlink" title="自定义主题"></a>自定义主题</h5><p>首先把 <code>src/App.css</code> 文件修改为 <code>src/App.less</code>，然后修改样式引用为 less 文件。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/* src/App.js */</span><br><span class="line"><span class="deletion">- import &#x27;./App.css&#x27;;</span></span><br><span class="line"><span class="addition">+ import &#x27;./App.less&#x27;;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/* src/App.less */</span><br><span class="line">- @import &#x27;~antd/dist/antd.css&#x27;;</span><br><span class="line">+ @import &#x27;~antd/dist/antd.less&#x27;;</span><br></pre></td></tr></table></figure>

<p>然后安装 <code>craco-less</code> 并修改 <code>craco.config.js</code> 文件如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add craco-less</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const CracoLessPlugin = require(<span class="string">&#x27;craco-less&#x27;</span>);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      plugin: CracoLessPlugin,</span><br><span class="line">      options: &#123;</span><br><span class="line">        lessLoaderOptions: &#123;</span><br><span class="line">          lessOptions: &#123;</span><br><span class="line">            modifyVars: &#123; <span class="string">&#x27;@primary-color&#x27;</span>: <span class="string">&#x27;#1DA57A&#x27;</span> &#125;,</span><br><span class="line">            javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="添加react-router-dom-6"><a href="#添加react-router-dom-6" class="headerlink" title="添加react-router-dom@6"></a>添加react-router-dom@6</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-router-dom@6</span><br></pre></td></tr></table></figure>

<h4 id="添加react-redux"><a href="#添加react-redux" class="headerlink" title="添加react-redux"></a>添加react-redux</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-redux</span><br></pre></td></tr></table></figure>

<h4 id="添加Redux-Toolkit"><a href="#添加Redux-Toolkit" class="headerlink" title="添加Redux Toolkit"></a>添加Redux Toolkit</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @reduxjs/toolkit</span><br></pre></td></tr></table></figure>

<h4 id="添加redux-persist"><a href="#添加redux-persist" class="headerlink" title="添加redux-persist"></a>添加redux-persist</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add redux-persist</span><br></pre></td></tr></table></figure>

<h4 id="异步获取数据"><a href="#异步获取数据" class="headerlink" title="异步获取数据"></a>异步获取数据</h4><h5 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h5><h5 id="可变的变量不放在useEffect中"><a href="#可变的变量不放在useEffect中" class="headerlink" title="可变的变量不放在useEffect中"></a>可变的变量不放在useEffect中</h5><p>错误用法：</p>
<p>这样写会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let sourceList = [];</span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">    getSourcesList(1).then(res =&gt; &#123;</span><br><span class="line">    	sourceList = res</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,[])</span><br></pre></td></tr></table></figure>



<p> 改为：</p>
<p>注：useEffect后面的依赖项，要加[]，不加，会一直执行这个方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const [sourceList, setSourceList] = useState([]);</span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">    getSourcesList(1).then(res =&gt; &#123;</span><br><span class="line">      console.log(&#x27;res获取素材列表&#x27;);</span><br><span class="line">      console.log(res);</span><br><span class="line">      setSourceList(res)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,[])</span><br></pre></td></tr></table></figure>

<h4 id="使用数据图表"><a href="#使用数据图表" class="headerlink" title="使用数据图表"></a>使用数据图表</h4><p><a target="_blank" rel="noopener" href="https://www.csdn.net/tags/MtjaUg3sNTM3OTQtYmxvZwO0O0OO0O0O.html">使用echarts-for-react数据图表</a></p>
<h5 id="ECharts-for-React"><a href="#ECharts-for-React" class="headerlink" title="ECharts for React"></a><a target="_blank" rel="noopener" href="https://git.hust.cc/echarts-for-react/">ECharts for React</a></h5><p><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/option.html#title">ECharts–官网文档</a></p>
<p>注：要安装echarts，不然会报以下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Module not found: Error: Can&#x27;t resolve &#x27;echarts&#x27; in &#x27;H:\Gitee\ad_manage_react\node_modules\echarts-for-react\esm&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add echarts</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add echarts-for-react</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactECharts from &#x27;echarts-for-react&#x27;;</span><br><span class="line">const options = &#123;</span><br><span class="line">    grid: &#123; top: 8, right: 8, bottom: 24, left: 36 &#125;,</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">      type: &#x27;category&#x27;,</span><br><span class="line">      data: [&#x27;Mon&#x27;, &#x27;Tue&#x27;, &#x27;Wed&#x27;, &#x27;Thu&#x27;, &#x27;Fri&#x27;, &#x27;Sat&#x27;, &#x27;Sun&#x27;],</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">      type: &#x27;value&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        data: [820, 932, 901, 934, 1290, 1330, 1320],</span><br><span class="line">        type: &#x27;line&#x27;,</span><br><span class="line">        smooth: true,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">      trigger: &#x27;axis&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;ReactECharts option=&#123;options&#125; /&gt;</span><br></pre></td></tr></table></figure>

<h4 id="工具栏组件"><a href="#工具栏组件" class="headerlink" title="工具栏组件"></a>工具栏组件</h4><h5 id="toolbox"><a href="#toolbox" class="headerlink" title="toolbox"></a>toolbox</h5><h4 id="echart图表生成表格"><a href="#echart图表生成表格" class="headerlink" title="echart图表生成表格"></a>echart图表生成表格</h4><p>toolbox—features—dataView</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/375435811">将echarts的数据视图装换为table表格,并且导出excel</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freesion.com/article/1308912177/">将ECHARTS的数据视图展示为TABLE并且导出EXCEL</a></p>
<h5 id="一、使用工具栏的方法"><a href="#一、使用工具栏的方法" class="headerlink" title="一、使用工具栏的方法"></a>一、使用工具栏的方法</h5><p>工具栏生成表格的设置，在<code>toolbox-&gt;feature-&gt;dataView</code>中设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">const options = &#123;</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">      type: &#x27;category&#x27;,</span><br><span class="line">      name: &#x27;日期&#x27;,</span><br><span class="line">      key: &#x27;date&#x27;,</span><br><span class="line">      data: [&#x27;Mon&#x27;, &#x27;Tue&#x27;, &#x27;Wed&#x27;, &#x27;Thu&#x27;, &#x27;Fri&#x27;, &#x27;Sat&#x27;, &#x27;Sun&#x27;],</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">      type: &#x27;value&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">      data: [&#x27;自然量&#x27;, &#x27;推广量&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123;</span><br><span class="line">      left: &#x27;3%&#x27;,</span><br><span class="line">      right: &#x27;4%&#x27;,</span><br><span class="line">      bottom: &#x27;3%&#x27;,</span><br><span class="line">      containLabel: true</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &#x27;自然量&#x27;,</span><br><span class="line">        key: &#x27;nature&#x27;,</span><br><span class="line">        type: &#x27;line&#x27;,</span><br><span class="line">        stack: &#x27;Total&#x27;,</span><br><span class="line">        data: [120, 132, 101, 134, 90, 230, 210]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &#x27;推广量&#x27;,</span><br><span class="line">        key: &#x27;spread&#x27;,</span><br><span class="line">        type: &#x27;line&#x27;,</span><br><span class="line">        stack: &#x27;Total&#x27;,</span><br><span class="line">        data: [220, 182, 191, 234, 290, 330, 310]</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">      trigger: &#x27;axis&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    toolbox: &#123;</span><br><span class="line">      feature: &#123;</span><br><span class="line">        dataView: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          readOnly: false,</span><br><span class="line">          lang: [&#x27;&#x27;, &#x27;关闭&#x27;, &#x27;刷新&#x27;],</span><br><span class="line">          optionToContent: function(opt) &#123;</span><br><span class="line">            var axisData = opt.xAxis[0].data;</span><br><span class="line">            var series = opt.series;</span><br><span class="line">            var table = &#x27;&lt;table class=&quot;chart-table&quot; style=&quot;width:100%;text-align:center&quot; border=&quot;1&quot;&gt;&#x27;+</span><br><span class="line">                      &#x27;&lt;thead&gt;&lt;tr&gt;&#x27;</span><br><span class="line">                        + &#x27;&lt;th&gt;时间&lt;/th&gt;&#x27;</span><br><span class="line">                        + &#x27;&lt;th&gt;时间&lt;/th&gt;&#x27;</span><br><span class="line">                        + &#x27;&lt;th&gt;时间&lt;/th&gt;&#x27;</span><br><span class="line">                      +&#x27;&lt;/thead&gt;&lt;/tr&gt;&#x27;</span><br><span class="line">                       + &#x27;&lt;tbody&gt;&#x27;;</span><br><span class="line">            for (var i = 0, l = axisData.length; i &lt; l; i++) &#123;</span><br><span class="line">                table += &#x27;&lt;tr&gt;&#x27;</span><br><span class="line">                         + &#x27;&lt;td&gt;&#x27; + axisData[i] + &#x27;&lt;/td&gt;&#x27;</span><br><span class="line">                         + &#x27;&lt;td&gt;&#x27; + series[0].data[i] + &#x27;&lt;/td&gt;&#x27;</span><br><span class="line">                         + &#x27;&lt;td&gt;&#x27; + series[0].data[i] + &#x27;&lt;/td&gt;&#x27;</span><br><span class="line">                         + &#x27;&lt;/tr&gt;&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">            table += &#x27;&lt;/tbody&gt;&lt;/table&gt;&#x27;;</span><br><span class="line">            return table;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const onChartReadyCallback = (echarts) =&gt;&#123;</span><br><span class="line">    myLineChart = echarts;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;ReactECharts option=&#123;options&#125; onChartReady=&#123;onChartReadyCallback&#125;/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="二、自定义表格的方法"><a href="#二、自定义表格的方法" class="headerlink" title="二、自定义表格的方法"></a>二、自定义表格的方法</h5><p>需要设置toolbox属性</p>
<p>缺点：表头的固定不好设置</p>
<p>设置dataView为不可见</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"></span><br><span class="line">feature: &#123;</span><br><span class="line">   dataView: &#123;</span><br><span class="line">      show: true</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">let myLineChart = &#x27;&#x27;;</span><br><span class="line">const onChartReadyCallback = (echarts) =&gt;&#123;</span><br><span class="line">    myLineChart = echarts;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const toggleToTable = () =&gt; &#123;</span><br><span class="line">	let opt = myLineChart.getOption();</span><br><span class="line">	var tbHtml = opt.toolbox[0].feature.dataView.optionToContent(opt);</span><br><span class="line">	</span><br><span class="line">	// 然后将生成的HTML填充到对应的节点</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;div onClick=&#123;toggleToTable&#125;&gt;生成表格&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h5 id="三、使用antd生成表格"><a href="#三、使用antd生成表格" class="headerlink" title="三、使用antd生成表格"></a>三、使用antd生成表格</h5><p>注：</p>
<ol>
<li>主要是处理<code>columns</code>和<code>dataSource</code>数据</li>
<li>不需要设置toolbox属性</li>
</ol>
<h4 id="legend"><a href="#legend" class="headerlink" title="legend"></a><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/option.html#legend">legend</a></h4><p>图例组件展现了不同系列的标记(symbol)，颜色和名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">legend: &#123;</span><br><span class="line">  data: [&#x27;自然量&#x27;, &#x27;推广量&#x27;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="grid"><a href="#grid" class="headerlink" title="grid"></a><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/option.html#grid">grid</a></h4><p>设置这个位置，可以让legend显示在图表上方位置，而不是覆盖在图表上</p>
<p>直角坐标系内绘图网格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">grid: &#123;</span><br><span class="line">    left: &#x27;3%&#x27;,</span><br><span class="line">    right: &#x27;4%&#x27;,</span><br><span class="line">    bottom: &#x27;3%&#x27;,</span><br><span class="line">    containLabel: true  //grid 区域是否包含坐标轴的刻度标签。</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="折叠图叠加"><a href="#折叠图叠加" class="headerlink" title="折叠图叠加"></a><a target="_blank" rel="noopener" href="https://echarts.apache.org/examples/zh/editor.html?c=line-stack">折叠图叠加</a></h4><h5 id="series"><a href="#series" class="headerlink" title="series"></a>series</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name: &#x27;自然量&#x27;,</span><br><span class="line">    type: &#x27;line&#x27;,</span><br><span class="line">    stack: &#x27;Total&#x27;,</span><br><span class="line">    data: [120, 132, 101, 134, 90, 230, 210]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    name: &#x27;推广量&#x27;,</span><br><span class="line">    type: &#x27;line&#x27;,</span><br><span class="line">    stack: &#x27;Total&#x27;,</span><br><span class="line">    data: [220, 182, 191, 234, 290, 330, 310]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="echart添加横向滚动条"><a href="#echart添加横向滚动条" class="headerlink" title="echart添加横向滚动条"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/-flq/p/9639331.html">echart添加横向滚动条</a></h4><h5 id="dataZoom"><a href="#dataZoom" class="headerlink" title="dataZoom"></a><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/option.html#dataZoom">dataZoom</a></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dataZoom: [</span><br><span class="line">  &#123;</span><br><span class="line">    type: &#x27;slider&#x27;,</span><br><span class="line">    show: true,</span><br><span class="line">    xAxisIndex: [0],</span><br><span class="line">  &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>



<h4 id="左侧导航栏-新版本的使用"><a href="#左侧导航栏-新版本的使用" class="headerlink" title="左侧导航栏-新版本的使用"></a>左侧导航栏-新版本的使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const items = [</span><br><span class="line">  &#123; label: &#x27;菜单项一&#x27;, key: &#x27;item-1&#x27; &#125;, // 菜单项务必填写 key</span><br><span class="line">  &#123; label: &#x27;菜单项二&#x27;, key: &#x27;item-2&#x27; &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    label: &#x27;子菜单&#x27;,</span><br><span class="line">    key: &#x27;submenu&#x27;,</span><br><span class="line">    children: [&#123; label: &#x27;子菜单项&#x27;, key: &#x27;submenu-item-1&#x27; &#125;],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">return &lt;Menu items=&#123;items&#125; /&gt;;</span><br></pre></td></tr></table></figure>

<h5 id="加上页面跳转"><a href="#加上页面跳转" class="headerlink" title="加上页面跳转"></a><a target="_blank" rel="noopener" href="https://ant.design/components/menu-cn/">加上页面跳转</a></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    label: (</span><br><span class="line">      &lt;a href=&quot;https://ant.design&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;</span><br><span class="line">        Navigation Four - Link</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">    ),</span><br><span class="line">    key: &#x27;alipay&#x27;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h5 id="项目中-加上页面跳转的做法"><a href="#项目中-加上页面跳转的做法" class="headerlink" title="项目中-加上页面跳转的做法"></a>项目中-加上页面跳转的做法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Link &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    label: ( &lt;Link to=&quot;/product&quot;&gt;全部产品&lt;/Link&gt;),</span><br><span class="line">    key:&#x27;/product&#x27;,</span><br><span class="line">    icon: &lt;AppstoreOutlined /&gt;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="Menu新版本—左侧导航栏完整代码"><a href="#Menu新版本—左侧导航栏完整代码" class="headerlink" title="Menu新版本—左侧导航栏完整代码"></a>Menu新版本—左侧导航栏完整代码</h4><ol>
<li><p>左侧导航menus</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">import &#123; </span><br><span class="line">    AppstoreOutlined,</span><br><span class="line">    ToolOutlined, </span><br><span class="line">    MacCommandOutlined,</span><br><span class="line">    FolderOpenOutlined, </span><br><span class="line">    DashboardOutlined,</span><br><span class="line">    PieChartOutlined,</span><br><span class="line">    SettingOutlined &#125;</span><br><span class="line">from &#x27;@ant-design/icons&#x27;;</span><br><span class="line">import &#123; Link &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">const leftMenus = [</span><br><span class="line">    &#123;</span><br><span class="line">        // label: &#x27;全部产品&#x27;,</span><br><span class="line">        label: ( &lt;Link to=&quot;/product&quot;&gt;全部产品&lt;/Link&gt;),</span><br><span class="line">        key:&#x27;/product&#x27;,</span><br><span class="line">        icon: &lt;AppstoreOutlined /&gt;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        // label: &#x27;素材管理&#x27;,</span><br><span class="line">        label: ( &lt;Link to=&quot;/source&quot;&gt;素材管理&lt;/Link&gt;),</span><br><span class="line">        key:&#x27;/source&#x27;,</span><br><span class="line">        icon: &lt;FolderOpenOutlined /&gt;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        label: &#x27;公共模块&#x27;,</span><br><span class="line">        key:&#x27;/ad&#x27;,</span><br><span class="line">        icon: &lt;MacCommandOutlined /&gt;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;权限管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/account&quot;&gt;权限管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/account&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;用户管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/user&quot;&gt;用户管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/user&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;账户管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/agent&quot;&gt;账户管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/agent&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;项目管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/group&quot;&gt;项目管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/group&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;渠道管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/channel&quot;&gt;渠道管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/channel&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;设备管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/device&quot;&gt;设备管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/device&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;推广参数设置&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/ad/config&quot;&gt;推广参数设置&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/ad/config&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        key:&#x27;/dashboard&#x27;,</span><br><span class="line">        label: &#x27;仪表盘&#x27;,</span><br><span class="line">        icon: &lt;DashboardOutlined /&gt;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;总览&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/dashboard/overview&quot;&gt;总览&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/dashboard/overview&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;实时&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/dashboard/realtime&quot;&gt;实时&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/dashboard/realtime&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;渠道效果对比&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/dashboard/channeleffect&quot;&gt;渠道效果对比&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/dashboard/channeleffect&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        key:&#x27;/collect&#x27;,</span><br><span class="line">        label: &#x27;报表&#x27;,</span><br><span class="line">        icon: &lt;PieChartOutlined /&gt;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;分包推广详情&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/collect/subpackage&quot;&gt;分包推广详情&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/collect/subpackage&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;SEM活动详情&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/collect/sem&quot;&gt;SEM活动详情&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/collect/sem&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;激活延迟分析&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/collect/effectevaluate&quot;&gt;激活延迟分析&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/collect/effectevaluate&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        key:&#x27;/tool&#x27;,</span><br><span class="line">        label: &#x27;工具&#x27;,</span><br><span class="line">        icon: &lt;ToolOutlined /&gt;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;归因查询&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/tool/attribute&quot;&gt;归因查询&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/tool/attribute&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;日志流&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/tool/logtool&quot;&gt;日志流&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/tool/logtool&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        key:&#x27;/manage&#x27;,</span><br><span class="line">        label: &#x27;配置&#x27;,</span><br><span class="line">        icon: &lt;SettingOutlined /&gt;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;推广回调管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/manage/datacb&quot;&gt;推广回调管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/manage/datacb&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                // label: &#x27;埋点管理&#x27;,</span><br><span class="line">                label: ( &lt;Link to=&quot;/manage/customevent&quot;&gt;埋点管理&lt;/Link&gt;),</span><br><span class="line">                key:&#x27;/manage/customevent&#x27;,</span><br><span class="line">                icon: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">export default leftMenus;</span><br></pre></td></tr></table></figure>
</li>
<li><p>左侧导航-组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;useState, useEffect&#125; from &#x27;react&#x27;</span><br><span class="line">import &#123; Layout, Menu &#125; from &#x27;antd&#x27;;</span><br><span class="line">import &#123; useLocation &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">import leftMenus from &#x27;../app/leftMenus&#x27;;</span><br><span class="line">import &#123; </span><br><span class="line">    MenuUnfoldOutlined,</span><br><span class="line">    MenuFoldOutlined,</span><br><span class="line">    &#125;</span><br><span class="line">from &#x27;@ant-design/icons&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; Sider &#125; = Layout;</span><br><span class="line">// const &#123; SubMenu &#125; = Menu;</span><br><span class="line"></span><br><span class="line">// 左侧导航栏</span><br><span class="line">export default function LeftNav(props) &#123;</span><br><span class="line">  const location = useLocation();</span><br><span class="line">  const pathname = location.pathname;</span><br><span class="line">  const [selectedKeys, setSelectedKeys] = useState([]);</span><br><span class="line">  const [openKeys, setOpenKeys] = useState([]);</span><br><span class="line"> </span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    // 更新选中状态</span><br><span class="line">    </span><br><span class="line">    const rank = pathname.split(&#x27;/&#x27;);</span><br><span class="line">    switch(rank.length) &#123;</span><br><span class="line">      case 2 :</span><br><span class="line">        setSelectedKeys([pathname])</span><br><span class="line">        break;</span><br><span class="line">      </span><br><span class="line">      case 3: </span><br><span class="line">        setSelectedKeys([pathname])</span><br><span class="line">        setOpenKeys([rank.slice(0, 2).join(&#x27;/&#x27;)])</span><br><span class="line">        break;</span><br><span class="line">  </span><br><span class="line">      case 4: </span><br><span class="line">        setSelectedKeys([pathname])</span><br><span class="line">        setOpenKeys([rank.slice(0, 2).join(&#x27;/&#x27;), rank.slice(0, 3).join(&#x27;/&#x27;)])</span><br><span class="line">        break;</span><br><span class="line">      default:</span><br><span class="line">        setSelectedKeys([]);</span><br><span class="line">        setOpenKeys([]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[pathname]);</span><br><span class="line"></span><br><span class="line">  // 展开/收起SubMenu触发</span><br><span class="line">  const onOpenChange = keys =&gt; &#123;</span><br><span class="line">    setOpenKeys(keys)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  // 点击MenuItem时触发</span><br><span class="line">  const onClick = e =&gt; &#123;</span><br><span class="line">    setSelectedKeys([e.key])</span><br><span class="line">  &#125;</span><br><span class="line">  return (</span><br><span class="line">    &lt;Sider </span><br><span class="line">        trigger=&#123;null&#125; </span><br><span class="line">        collapsible </span><br><span class="line">        collapsed=&#123;props.isCollapsed&#125;</span><br><span class="line">        collapsedWidth=&quot;60&quot;</span><br><span class="line">        className=&#x27;left-sider&#x27;</span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">            overflow: &#x27;auto&#x27;,</span><br><span class="line">            height: &#x27;100vh&#x27;,</span><br><span class="line">            position: &#x27;fixed&#x27;,</span><br><span class="line">            left: 0,</span><br><span class="line">            top: 0,</span><br><span class="line">            bottom: 0,</span><br><span class="line">          &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;div className=&quot;logo&quot;&gt;</span><br><span class="line">        &lt;span </span><br><span class="line">            className=&#x27;toggleFold&#x27; </span><br><span class="line">            onClick=&#123;props.onToggle&#125;</span><br><span class="line">        &gt;</span><br><span class="line">            &#123; props.isCollapsed ? &lt;MenuUnfoldOutlined/&gt; :  &lt;MenuFoldOutlined/&gt;&#125;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">        &lt;Menu</span><br><span class="line">          items=&#123;leftMenus&#125; </span><br><span class="line">          theme=&quot;dark&quot;</span><br><span class="line">          mode=&quot;inline&quot; </span><br><span class="line">          openKeys=&#123;openKeys&#125;</span><br><span class="line">          selectedKeys=&#123;selectedKeys&#125;</span><br><span class="line">          onOpenChange=&#123;onOpenChange&#125;</span><br><span class="line">          onClick=&#123;onClick&#125;</span><br><span class="line">          defaultSelectedKeys=&#123;[selectedKeys]&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;/Sider&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="antd-日期选择-最近几天"><a href="#antd-日期选择-最近几天" class="headerlink" title="antd-日期选择-最近几天"></a>antd-日期选择-最近几天</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123; DatePicker &#125; from &#x27;antd&#x27;;</span><br><span class="line">const &#123; RangePicker &#125; = DatePicker;</span><br><span class="line"></span><br><span class="line">&lt;RangePicker</span><br><span class="line">  ranges=&#123;&#123;</span><br><span class="line">    &#x27;全部&#x27;: [moment(&quot;2020-09-10&quot;), moment()],</span><br><span class="line">    &#x27;今天&#x27;: [moment(), moment()],</span><br><span class="line">    &#x27;昨天&#x27;: [moment().subtract(1, &#x27;days&#x27;), moment().subtract(1, &#x27;days&#x27;)],</span><br><span class="line">    &#x27;近7天&#x27;: [moment().subtract(6, &#x27;days&#x27;), moment()],</span><br><span class="line">    &#x27;近14天&#x27;: [moment().subtract(13, &#x27;days&#x27;), moment()],</span><br><span class="line">    &#x27;近30天&#x27;: [moment().subtract(29, &#x27;days&#x27;), moment()],</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  locale=&#123;locale&#125;</span><br><span class="line">  defaultValue=&#123;[moment(&quot;2020-09-10&quot;), moment()]&#125;</span><br><span class="line">  style=&#123;&#123;width:220&#125;&#125;</span><br><span class="line">  onChange=&#123;onRangeChange&#125;</span><br><span class="line">  placement=&quot;bottomRight&quot;</span><br><span class="line">/&gt;</span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure>

<h4 id="antd表格"><a href="#antd表格" class="headerlink" title="antd表格"></a>antd表格</h4><p>渲染表格的数据—–数组数据，每一项要有唯一的key值</p>
<p>key值相关报错：<code>Warning: Each child in a list should have a unique &quot;key&quot; prop.</code></p>
<p>解决方法：</p>
<ol>
<li><p>在数据中添加key属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;key&quot;: 3215,</span><br><span class="line">        &quot;id&quot;: 3215,</span><br><span class="line">        &quot;group_id&quot;: 2,</span><br><span class="line">        &quot;group_name&quot;: &quot;测试项目&quot;,</span><br><span class="line">        &quot;create_by&quot;: &quot;10000&quot;</span><br><span class="line">     &#125;</span><br><span class="line">     ....</span><br><span class="line"> ]    </span><br></pre></td></tr></table></figure>
</li>
<li><p>使用别的唯一性的属性：<code> rowKey = &#123; record =&gt; record.id&#125;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Table </span><br><span class="line">  columns=&#123;columns&#125; </span><br><span class="line">  dataSource=&#123;accountList&#125;</span><br><span class="line">  rowKey = &#123; record =&gt; record.id&#125;</span><br><span class="line">  bordered&gt;</span><br><span class="line">&lt;/Table&gt;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="报错信息处理"><a href="#报错信息处理" class="headerlink" title="报错信息处理"></a>报错信息处理</h4><p><code>[Violation] Added non-passive event listener to a scroll-blocking ＜some＞ event. Consider marking eve</code></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45820967/article/details/117426636">react报错: Unable to preventDefault inside passive event li ……</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/51345929/react-js-violation-added-non-passive-event-listener-to-a-scroll-blocking-mou">React js -[Violation] Added non-passive event listener to a scroll-blocking ‘mousewheel’ event</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/576347881906?u_atoken=232b4a7e-0231-4946-8908-47ebf8e606a9&u_asession=01_3ZFCuVcOfuwSPfoQFLRMZKUf4ScuwHJlmBJl7VN4QVB7dNjfi4wDQit6KXmcpw4X0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K_OXZcyuDd-UGTHXkkR-LW63KmjkU3JT7ddtoHBlecZWGBkFo3NEHBv0PZUm6pbxQU&u_asig=05EPhiOrWxZ56qQnnFYP6YcxEx5hAgiHwRV60GtPYDTOQNU6EBiTLvNmp_kORYdoQkT4feHNfaH8NCsFDdym0tGIgqMawo17KziwQo1CW2H_dUHyxqMXrsIndIQKY2FKo2C0nf13abHfSCQtBUc7n-PTwxuv4jOESKkFpMk-zCu2P9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzTc2O0STMN1NJO_82A13D1qAuhUSv5lr4LcS7JnU9TKWzKnPGeiYgOeAvNODIGQOu-3h9VXwMyh6PgyDIVSG1W8DqoVQR08v6xbsOEOaVs-lHANw4_8BpU31TkZPiPBinieC25fhKOae3jNeeE3fG_hOWccivToL8qDJ_zjAM3mAmWspDxyAEEo4kbsryBKb9Q&u_aref=+OncCc9GS1BtE2d0dfPERz/UNao=">react Added non-passive event listener to a scroll-blocking ‘mousewheel’ event</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add default-passive-events  或  cnpm i default-passive-events -S</span><br><span class="line">并在 App.js 中 import &#x27;default-passive-events&#x27;;</span><br></pre></td></tr></table></figure>

<p>加上以上配置之后，</p>
<p>报错：<code>react-dom.development.js:6848 Unable to preventDefault inside passive event listener invocation.</code></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wdnmd_69/article/details/124354187">React中使用antd的select报错Unable to preventDefault inside passive event listener invocation.</a></p>
<p>最后解决：</p>
<p>先停掉运行中的项目，找到node_modules\react-dom\cjs\react-dom.development.js中6202行的代码将event.preventDefault();注释掉，再重新运行项目，无需任何其他设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (event.preventDefault) &#123;</span><br><span class="line">    //event.preventDefault(); // $FlowFixMe - flow is not aware of `unknown` in IE</span><br><span class="line">  &#125; else if (typeof event.returnValue !== &#x27;unknown&#x27;) &#123;</span><br><span class="line">    event.returnValue = false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_59803648/article/details/121792700">React中轮播报错pan-y不起作用Unable to preventDefault inside passive event listener invocation</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/02/React-Native%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="winney">
      <meta itemprop="description" content="Doing is better than saying.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="winney">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/02/React-Native%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">React-Native环境配置相关笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-02 08:10:40" itemprop="dateCreated datePublished" datetime="2021-10-02T08:10:40+08:00">2021-10-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-30 13:18:11" itemprop="dateModified" datetime="2024-10-30T13:18:11+08:00">2024-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">前端开发框架</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/React-Native/" itemprop="url" rel="index"><span itemprop="name">React Native</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="macOS环境配置"><a href="#macOS环境配置" class="headerlink" title="macOS环境配置"></a>macOS环境配置</h3><h4 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h4><p>参考博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_38184748/article/details/114115441">MacOs M1安装Homebrew 在国内最简单方法</a>——使用这个安装成功</p>
<h5 id="1-安装Homebrew"><a href="#1-安装Homebrew" class="headerlink" title="1.安装Homebrew"></a>1.安装Homebrew</h5><hr>
<h6 id="安装步骤："><a href="#安装步骤：" class="headerlink" title="安装步骤："></a>安装步骤：</h6><p>M1芯片：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/huwei1024/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command not found : brew</span><br></pre></td></tr></table></figure>

<p>因为M1芯片的包安装位置不在是以前的<code>/usr/local/</code>，而是<code>/opt/homebrew</code>，所以要将配置文件里的环境变量改过来</p>
<p>1、首先进入根目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~</span><br></pre></td></tr></table></figure>

<p>2、创建.zshrc文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch .zshrc</span><br></pre></td></tr></table></figure>

<p>3、打开文件进行编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ open -e .zshrc</span><br></pre></td></tr></table></figure>

<p>4、如果有旧的环境就修改，没有就新增</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/opt/homebrew/bin:$PATH</span><br><span class="line">export PATH=/opt/homebrew/sbin:$PATH</span><br></pre></td></tr></table></figure>

<p>5、保存<br>使用<code>command + s</code><br>6、生效环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ source .zshrc</span><br></pre></td></tr></table></figure>

<p>7、测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew -v    // 显示版本，即安装成功</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h6 id="本次安装参考内容："><a href="#本次安装参考内容：" class="headerlink" title="本次安装参考内容："></a>本次安装参考内容：</h6><p>开源安装脚本库：<a target="_blank" rel="noopener" href="https://gitee.com/cunkai/HomebrewCN">https://gitee.com/cunkai/HomebrewCN</a></p>
<p>复制以下内容到你的终端：<br>intel芯片：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>M1芯片：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/huwei1024/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>回车运行，按照提示运行下去就可以了</p>
<p>错误<br>做完上面的傻瓜式操作，理论上就OK了，但是我这边出现了安装完后用不了的错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command not found : brew</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h6 id="相关参考内容："><a href="#相关参考内容：" class="headerlink" title="相关参考内容："></a>相关参考内容：</h6><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/111014448">Homebrew国内如何自动安装（国内地址）（Mac &amp; Linux）</a></p>
<p>旧文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_38184748/article/details/99450330?spm=1001.2014.3001.5502">macOS安装Homebrew太慢，换用清华镜像</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global --add safe.directory /opt/homebrew/Homebrew/Library/Taps/homebrew/homebrew-core</span><br><span class="line"></span><br><span class="line">git config --global --add safe.directory /opt/homebrew/Homebrew/Library/Taps/homebrew/homebrew-cask</span><br></pre></td></tr></table></figure>

<h6 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a>查看镜像</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &quot;$(brew --repo)&quot; &amp;&amp; git remote -v</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-安装watchman"><a href="#2-安装watchman" class="headerlink" title="2.安装watchman"></a>2.安装watchman</h4><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhengzaifeidelushang/article/details/126640559?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166458144816782417056210%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=166458144816782417056210&biz_id=&utm_medium=distribute.pc_search_result.none-task-code-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-126640559-0-null-null.142%5Ev51%5Econtrol,201%5Ev3%5Econtrol_1&utm_term=Disable%20this%20behaviour%20by%20setting%20HOMEBREW_NO_INSTALL_CLEANUP.%20Hide%20these%20hints%20with%20HOMEBREW_NO_ENV_HINTS%20(see%20%60man%20brew%60).">Mac系列之：Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP. Hide these hints with HOMEBREW</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install watchman</span><br></pre></td></tr></table></figure>

<p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.</span><br><span class="line">Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).</span><br></pre></td></tr></table></figure>

<p>解决方法，终端输入以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export HOMEBREW_NO_INSTALL_CLEANUP=TRUE</span><br></pre></td></tr></table></figure>

<p>查看版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watchman -v</span><br></pre></td></tr></table></figure>



<h4 id="3-安装cocoapods"><a href="#3-安装cocoapods" class="headerlink" title="3.安装cocoapods"></a>3.安装cocoapods</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install cocoapods</span><br></pre></td></tr></table></figure>

<p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">yarn run v1.22.19</span><br><span class="line">warning ../../../../../package.json: No license field</span><br><span class="line">$ react-native run-ios</span><br><span class="line">info Found Xcode project &quot;AwesomeProject.xcodeproj&quot;</span><br><span class="line">info Building (using &quot;xcodebuild -project AwesomeProject.xcodeproj -configuration Debug -scheme AwesomeProject -destination id=A7F04948-7FA8-45D1-B4A6-C26B21B6548A&quot;)</span><br><span class="line">error Failed to build iOS project. We ran &quot;xcodebuild&quot; command but it exited with error code 65. To debug build logs further, consider building your app with Xcode.app, by opening AwesomeProject.xcodeproj.</span><br><span class="line">Command line invocation:</span><br><span class="line">    /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -project AwesomeProject.xcodeproj -configuration Debug -scheme AwesomeProject -destination id=A7F04948-7FA8-45D1-B4A6-C26B21B6548A</span><br><span class="line"></span><br><span class="line">User defaults from command line:</span><br><span class="line">    IDEPackageSupportUseBuiltinSCM = YES</span><br><span class="line"></span><br><span class="line">Prepare packages</span><br><span class="line"></span><br><span class="line">Computing target dependency graph and provisioning inputs</span><br><span class="line"></span><br><span class="line">Create build description</span><br><span class="line">Build description signature: bf2f29ad51ca6266b44cbb8d643576b3</span><br><span class="line">Build description path: /Users/yangyanyi/Library/Developer/Xcode/DerivedData/AwesomeProject-fgqiuteczcwroxgbdakmwcrknckt/Build/Intermediates.noindex/XCBuildData/bf2f29ad51ca6266b44cbb8d643576b3-desc.xcbuild</span><br><span class="line"></span><br><span class="line">note: Building targets in dependency order</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">warning: Unable to read contents of XCFileList &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-resources-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Unable to read contents of XCFileList &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-frameworks-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-resources-Debug-input-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-resources-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-frameworks-Debug-input-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-frameworks-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;[CP] Copy Pods Resources&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;[CP] Embed Pods Frameworks&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;Bundle React Native code and images&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;Start Packager&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line"></span><br><span class="line">** BUILD FAILED **</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">info Run CLI with --verbose flag for more details.</span><br><span class="line">error Command failed with exit code 1.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ios </span><br><span class="line">pod install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://lightrun.com/answers/facebook-react-native-fresh-react-native-066-app-does-not-build-on-xcode-13-ios-116-compiler-error-on-sysuioo">Fresh react-native (0.66) app does not build on XCode 13, iOS 11.6: compiler error on SysUio.o</a>  </p>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55725042/error-failed-to-build-ios-project-we-ran-xcodebuild-command-but-it-exited-wit">error Failed to build iOS project. We ran “xcodebuild” command but it exited with error code 65. i can not Run my Project</a></p>
</blockquote>
<p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[!] Error installing CocoaAsyncSocket</span><br><span class="line">[!] /usr/local/bin/git clone https://github.com/robbiehanson/CocoaAsyncSocket.git /var/folders/2p/dtc9s94148j8px03g4gkxpkr0000gn/T/d20221001-8728-969mqt --template= --single-branch --depth 1 --branch 7.6.5</span><br><span class="line"></span><br><span class="line">Cloning into &#x27;/var/folders/2p/dtc9s94148j8px03g4gkxpkr0000gn/T/d20221001-8728-969mqt&#x27;...</span><br><span class="line">fatal: unable to access &#x27;https://github.com/robbiehanson/CocoaAsyncSocket.git/&#x27;: HTTP/2 stream 1 was not closed cleanly before end of the underlying stream</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>由于网络问题，不断安装中断，每次报类似的错误，继续输入pod install，就会继续安装，直到安装成功</p>
</blockquote>
<h4 id="4-hermes-engine的安装问题"><a href="#4-hermes-engine的安装问题" class="headerlink" title="4.hermes-engine的安装问题"></a>4.hermes-engine的安装问题</h4><blockquote>
<p>这个有490多M，每次安装都失败，报错信息都一致。这个折腾了好久好久….</p>
</blockquote>
<p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[!] Error installing hermes-engine</span><br><span class="line">[!] /usr/bin/curl -f -L -o /var/folders/2p/dtc9s94148j8px03g4gkxpkr0000gn/T/d20221001-67147-8lkp1c/file.tgz https://github.com/facebook/react-native/releases/download/v0.70.1/hermes-runtime-darwin-v0.70.1.tar.gz --create-dirs --netrc-optional --retry 2 -A &#x27;CocoaPods/1.11.3 cocoapods-downloader/1.5.1&#x27;</span><br><span class="line"></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0</span><br><span class="line">  0  496M    0 1343k    0     0   1299      0   4d 15h  0:17:38   4d 14h   894</span><br><span class="line">curl: (92) HTTP/2 stream 0 was not closed cleanly: PROTOCOL_ERROR (err 1)</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<ol>
<li>打开一个终端，先执行</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&#x27;your.host:port&#x27; //your.host:port我的是127.0.0.1:1087</span><br><span class="line">export https_proxy=&#x27;your.host:port&#x27; your.host:port我的是127.0.0.1:1087</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>这个终端界面转到项目目录下，再执行<code>pod install --verbose</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install --verbose						// 在安装命令添加参数`--verbose`看打印详细信息</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/BUG_delete/article/details/110133505?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-110133505-blog-82894101.t0_edu_mix&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-110133505-blog-82894101.t0_edu_mix&utm_relevant_index=1">Cocoapods安装私有库问题</a></p>
</blockquote>
<h5 id="安装完成"><a href="#安装完成" class="headerlink" title="安装完成"></a>安装完成</h5><p>命令行打印消息中看到自动执行<code>Generating Pods project</code></p>
<p>命令行打印消息中看到自动执行<code>Integrating client project</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[!] Please close any current Xcode sessions and use `myapp.xcworkspace` for this project from now on.</span><br><span class="line"></span><br><span class="line">Integrating target `Pods-myapp` (`myapp.xcodeproj` project)</span><br><span class="line"></span><br><span class="line">Integrating target `Pods-myapp-myappTests` (`myapp.xcodeproj` project)</span><br><span class="line">  - Running post integrate hooks</span><br><span class="line">  - Writing Lockfile in `Podfile.lock`</span><br><span class="line">  - Writing Manifest in `Pods/Manifest.lock`</span><br><span class="line">  CDN: trunk Relative path: CocoaPods-version.yml exists! Returning local because checking is only performed in repo update</span><br><span class="line"></span><br><span class="line">-&gt; Pod installation complete! There are 59 dependencies from the Podfile and 49 total pods installed.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>根据终端提示，如果想要使用刚添加的第三方库，必须打开<code>MyApp.xcworkspace</code>，而非之前的<code>MyApp.xcodeProj</code>。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c19df91997fd">CocoaPods的安装与使用</a></p>
<h4 id="5-运行项目"><a href="#5-运行项目" class="headerlink" title="5.运行项目"></a>5.运行项目</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn ios </span><br><span class="line">或</span><br><span class="line">yarn react-native run-ios</span><br></pre></td></tr></table></figure>



<h4 id="配置-ANDROID-SDK-ROOT-环境变量"><a href="#配置-ANDROID-SDK-ROOT-环境变量" class="headerlink" title="配置 ANDROID_SDK_ROOT 环境变量"></a>配置 ANDROID_SDK_ROOT 环境变量</h4><p>1.打开配置文件的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.zshrc</span><br><span class="line"></span><br><span class="line">vi /Users/yangyanyi/.zshrc</span><br></pre></td></tr></table></figure>

<p>2.编辑配置文件，将以下代码粘贴到配置文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 如果你不是通过Android Studio安装的sdk，则其路径可能不同，请自行确定清楚</span><br><span class="line">export ANDROID_SDK_ROOT=$HOME/Library/Android/sdk</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/emulator</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/tools</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/tools/bin</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/platform-tools</span><br></pre></td></tr></table></figure>

<p>3.保存后退出vi，参考：<a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/e4705173bd23482fb4daa58da0116c175f0e1e80.html">Mac终端编辑完成后如何保存</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq</span><br></pre></td></tr></table></figure>

<p>4.使用<code>source $HOME/.zshrc</code>命令来使环境变量设置立即生效（否则重启后才生效）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source $HOME/.zshrc</span><br></pre></td></tr></table></figure>

<p>5.使用<code>echo $ANDROID_SDK_ROOT</code>检查此变量是否已正确设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $ANDROID_SDK_ROOT</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输入完，在终端成功显示：<code>/Users/yangyanyi/Library/Android/sdk</code></p>
</blockquote>
<h4 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h4><p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">FAILURE: Build failed with an exception.</span><br><span class="line"></span><br><span class="line">* What went wrong:</span><br><span class="line">A problem occurred configuring project &#x27;:react-native-gradle-plugin&#x27;.</span><br><span class="line">&gt; Could not resolve all files for configuration &#x27;:react-native-gradle-plugin:classpath&#x27;.</span><br><span class="line">   &gt; Could not download kotlin-gradle-plugin-1.6.10.jar (org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10)</span><br><span class="line">      &gt; Could not get resource &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.6.10/kotlin-gradle-plugin-1.6.10.jar&#x27;.</span><br><span class="line">         &gt; Could not GET &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.6.10/kotlin-gradle-plugin-1.6.10.jar&#x27;.</span><br><span class="line">            &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/151.101.40.215] failed: connect timed out</span><br><span class="line">   &gt; Could not download kotlin-compiler-embeddable-1.6.10.jar (org.jetbrains.kotlin:kotlin-compiler-embeddable:1.6.10)</span><br><span class="line">      &gt; Could not get resource &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-compiler-embeddable/1.6.10/kotlin-compiler-embeddable-1.6.10.jar&#x27;.</span><br><span class="line">         &gt; Could not GET &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-compiler-embeddable/1.6.10/kotlin-compiler-embeddable-1.6.10.jar&#x27;.</span><br><span class="line">            &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/151.101.40.215] failed: connect timed out</span><br><span class="line"></span><br><span class="line">* Try:</span><br><span class="line">&gt; Run with --stacktrace option to get the stack trace.</span><br><span class="line">&gt; Run with --info or --debug option to get more log output.</span><br><span class="line">&gt; Run with --scan to get full insights.</span><br><span class="line"></span><br><span class="line">* Get more help at https://help.gradle.org</span><br><span class="line"></span><br><span class="line">BUILD FAILED in 12m 28s</span><br><span class="line"></span><br><span class="line">error Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.</span><br><span class="line">Error: Command failed: ./gradlew app:installDebug -PreactNativeDevServerPort=8081</span><br><span class="line"></span><br><span class="line">FAILURE: Build failed with an exception.</span><br><span class="line"></span><br><span class="line">* What went wrong:</span><br><span class="line">A problem occurred configuring project &#x27;:react-native-gradle-plugin&#x27;.</span><br><span class="line">&gt; Could not resolve all files for configuration &#x27;:react-native-gradle-plugin:classpath&#x27;.</span><br><span class="line">   &gt; Could not download kotlin-gradle-plugin-1.6.10.jar (org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10)</span><br><span class="line">      &gt; Could not get resource &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.6.10/kotlin-gradle-plugin-1.6.10.jar&#x27;.</span><br><span class="line">         &gt; Could not GET &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.6.10/kotlin-gradle-plugin-1.6.10.jar&#x27;.</span><br><span class="line">            &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/151.101.40.215] failed: connect timed out</span><br><span class="line">   &gt; Could not download kotlin-compiler-embeddable-1.6.10.jar (org.jetbrains.kotlin:kotlin-compiler-embeddable:1.6.10)</span><br><span class="line">      &gt; Could not get resource &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-compiler-embeddable/1.6.10/kotlin-compiler-embeddable-1.6.10.jar&#x27;.</span><br><span class="line">         &gt; Could not GET &#x27;https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-compiler-embeddable/1.6.10/kotlin-compiler-embeddable-1.6.10.jar&#x27;.</span><br><span class="line">            &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/151.101.40.215] failed: connect timed out</span><br><span class="line"></span><br><span class="line">* Try:</span><br><span class="line">&gt; Run with --stacktrace option to get the stack trace.</span><br><span class="line">&gt; Run with --info or --debug option to get more log output.</span><br><span class="line">&gt; Run with --scan to get full insights.</span><br><span class="line"></span><br><span class="line">* Get more help at https://help.gradle.org</span><br><span class="line"></span><br><span class="line">BUILD FAILED in 12m 28s</span><br><span class="line"></span><br><span class="line">    at makeError (/Users/yangyanyi/Documents/Code/Gitee/reactive_native/myapp/node_modules/execa/index.js:174:9)</span><br><span class="line">    at /Users/yangyanyi/Documents/Code/Gitee/reactive_native/myapp/node_modules/execa/index.js:278:16</span><br><span class="line">    at processTicksAndRejections (node:internal/process/task_queues:96:5)</span><br><span class="line">    at async runOnAllDevices (/Users/yangyanyi/Documents/Code/Gitee/reactive_native/myapp/node_modules/@react-native-community/cli-platform-android/build/commands/runAndroid/runOnAllDevices.js:109:5)</span><br><span class="line">    at async Command.handleAction (/Users/yangyanyi/Documents/Code/Gitee/reactive_native/myapp/node_modules/@react-native-community/cli/build/index.js:142:9)</span><br><span class="line">info Run CLI with --verbose flag for more details.</span><br><span class="line">error Command failed with exit code 1.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/01/MacOs%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="winney">
      <meta itemprop="description" content="Doing is better than saying.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="winney">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/01/MacOs%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">MacOs相关笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-01 06:59:49" itemprop="dateCreated datePublished" datetime="2021-10-01T06:59:49+08:00">2021-10-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-30 13:18:11" itemprop="dateModified" datetime="2024-10-30T13:18:11+08:00">2024-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mac/" itemprop="url" rel="index"><span itemprop="name">Mac</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Mac系统——iOS环境"><a href="#Mac系统——iOS环境" class="headerlink" title="Mac系统——iOS环境"></a>Mac系统——iOS环境</h4><h5 id="安装Homebrew"><a href="#安装Homebrew" class="headerlink" title="安装Homebrew"></a>安装Homebrew</h5><p>开源安装脚本库：<a target="_blank" rel="noopener" href="https://gitee.com/cunkai/HomebrewCN">https://gitee.com/cunkai/HomebrewCN</a></p>
<p>复制以下内容到你的终端：<br>intel芯片：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>M1芯片：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/huwei1024/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>回车运行，按照提示运行下去就可以了</p>
<p>错误<br>做完上面的傻瓜式操作，理论上就OK了，但是我这边出现了安装完后用不了的错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command not found : brew</span><br></pre></td></tr></table></figure>

<p>经过检查后发现，是因为M1芯片的包安装位置不在是以前的<code>/usr/local/</code><br>而是<code>/opt/homebrew</code>，所以要将配置文件里的环境变量改过来</p>
<p>1、首先进入根目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~</span><br></pre></td></tr></table></figure>

<p>2、创建.zshrc文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch .zshrc</span><br></pre></td></tr></table></figure>

<p>3、打开文件进行编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ open -e .zshrc</span><br></pre></td></tr></table></figure>

<p>4、如果有旧的环境就修改，没有就新增</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/opt/homebrew/bin:$PATH</span><br><span class="line">export PATH=/opt/homebrew/sbin:$PATH</span><br></pre></td></tr></table></figure>

<p>5、保存<br>使用<code>command + s</code><br>6、生效环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ source .zshrc</span><br></pre></td></tr></table></figure>

<p>7、测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew -v</span><br></pre></td></tr></table></figure>


<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_38184748/article/details/114115441">MacOs M1安装Homebrew 在国内最简单方法</a>——使用这个安装成功</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/111014448">Homebrew国内如何自动安装（国内地址）（Mac &amp; Linux）</a></p>
<p>旧文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_38184748/article/details/99450330?spm=1001.2014.3001.5502">macOS安装Homebrew太慢，换用清华镜像</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global --add safe.directory /opt/homebrew/Homebrew/Library/Taps/homebrew/homebrew-core</span><br><span class="line"></span><br><span class="line">git config --global --add safe.directory /opt/homebrew/Homebrew/Library/Taps/homebrew/homebrew-cask</span><br></pre></td></tr></table></figure>


<h5 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a>查看镜像</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &quot;$(brew --repo)&quot; &amp;&amp; git remote -v</span><br></pre></td></tr></table></figure>





<h4 id="安装watchman"><a href="#安装watchman" class="headerlink" title="安装watchman"></a>安装watchman</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install watchman</span><br></pre></td></tr></table></figure>

<h5 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.</span><br><span class="line">Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).</span><br></pre></td></tr></table></figure>

<p>解决：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export HOMEBREW_NO_INSTALL_CLEANUP=TRUE</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhengzaifeidelushang/article/details/126640559?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166458144816782417056210%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=166458144816782417056210&biz_id=&utm_medium=distribute.pc_search_result.none-task-code-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-126640559-0-null-null.142%5Ev51%5Econtrol,201%5Ev3%5Econtrol_1&utm_term=Disable%20this%20behaviour%20by%20setting%20HOMEBREW_NO_INSTALL_CLEANUP.%20Hide%20these%20hints%20with%20HOMEBREW_NO_ENV_HINTS%20(see%20%60man%20brew%60).">Mac系列之：Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP. Hide these hints with HOMEBREW</a></p>
<p>查看版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watchman -v</span><br></pre></td></tr></table></figure>

<h4 id="安装cocoapods"><a href="#安装cocoapods" class="headerlink" title="安装cocoapods"></a>安装cocoapods</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install cocoapods</span><br></pre></td></tr></table></figure>







<p>镜像地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.tuna.tsinghua.edu.cn</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry 镜像地址</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm ---- https://registry.npmjs.org/</span><br><span class="line">cnpm --- http://r.cnpmjs.org/</span><br><span class="line">taobao - https://registry.npmmirror.com</span><br><span class="line">edunpm - http://registry.enpmjs.org/</span><br><span class="line">eu ----- http://registry.npmjs.eu/</span><br><span class="line">au ----- http://registry.npmjs.org.au/</span><br><span class="line">sl ----- http://npm.strongloop.com/</span><br><span class="line">nj ----- https://registry.nodejitsu.com/</span><br><span class="line">pt ----- http://registry.npmjs.pt/</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>切换回淘宝镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>

<p>先用淘宝镜像安装项目，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx react-native init AwesomeProject</span><br></pre></td></tr></table></figure>

<p><code>安装不了cocoapods</code></p>
<p>切换到<code>https://registry.npmmirror.com/</code></p>
<p>切换到项目目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd AwesomeProject</span><br></pre></td></tr></table></figure>

<p>再安装cocoapods</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i cocoapods</span><br></pre></td></tr></table></figure>



<p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">yarn run v1.22.19</span><br><span class="line">warning ../../../../../package.json: No license field</span><br><span class="line">$ react-native run-ios</span><br><span class="line">info Found Xcode project &quot;AwesomeProject.xcodeproj&quot;</span><br><span class="line">info Building (using &quot;xcodebuild -project AwesomeProject.xcodeproj -configuration Debug -scheme AwesomeProject -destination id=A7F04948-7FA8-45D1-B4A6-C26B21B6548A&quot;)</span><br><span class="line">error Failed to build iOS project. We ran &quot;xcodebuild&quot; command but it exited with error code 65. To debug build logs further, consider building your app with Xcode.app, by opening AwesomeProject.xcodeproj.</span><br><span class="line">Command line invocation:</span><br><span class="line">    /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -project AwesomeProject.xcodeproj -configuration Debug -scheme AwesomeProject -destination id=A7F04948-7FA8-45D1-B4A6-C26B21B6548A</span><br><span class="line"></span><br><span class="line">User defaults from command line:</span><br><span class="line">    IDEPackageSupportUseBuiltinSCM = YES</span><br><span class="line"></span><br><span class="line">Prepare packages</span><br><span class="line"></span><br><span class="line">Computing target dependency graph and provisioning inputs</span><br><span class="line"></span><br><span class="line">Create build description</span><br><span class="line">Build description signature: bf2f29ad51ca6266b44cbb8d643576b3</span><br><span class="line">Build description path: /Users/yangyanyi/Library/Developer/Xcode/DerivedData/AwesomeProject-fgqiuteczcwroxgbdakmwcrknckt/Build/Intermediates.noindex/XCBuildData/bf2f29ad51ca6266b44cbb8d643576b3-desc.xcbuild</span><br><span class="line"></span><br><span class="line">note: Building targets in dependency order</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">/Users/yangyanyi/Documents/Code/Gitee/reactive_native/AwesomeProject/ios/Pods/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject.debug.xcconfig:1:1: error: unable to open configuration settings file</span><br><span class="line">warning: Unable to read contents of XCFileList &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-resources-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Unable to read contents of XCFileList &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-frameworks-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-resources-Debug-input-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-resources-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-frameworks-Debug-input-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">error: Unable to load contents of file list: &#x27;/Target Support Files/Pods-AwesomeProject/Pods-AwesomeProject-frameworks-Debug-output-files.xcfilelist&#x27; (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;[CP] Copy Pods Resources&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;[CP] Embed Pods Frameworks&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;Bundle React Native code and images&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;Start Packager&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;AwesomeProject&#x27; from project &#x27;AwesomeProject&#x27;)</span><br><span class="line"></span><br><span class="line">** BUILD FAILED **</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">info Run CLI with --verbose flag for more details.</span><br><span class="line">error Command failed with exit code 1.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://lightrun.com/answers/facebook-react-native-fresh-react-native-066-app-does-not-build-on-xcode-13-ios-116-compiler-error-on-sysuioo">Fresh react-native (0.66) app does not build on XCode 13, iOS 11.6: compiler error on SysUio.o</a>  </p>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55725042/error-failed-to-build-ios-project-we-ran-xcodebuild-command-but-it-exited-wit">error Failed to build iOS project. We ran “xcodebuild” command but it exited with error code 65. i can not Run my Project</a></p>
<p>原因可能是没有安装cocoapods成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ios </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure>

<p>然后报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[!] Error installing CocoaAsyncSocket</span><br><span class="line">[!] /usr/local/bin/git clone https://github.com/robbiehanson/CocoaAsyncSocket.git /var/folders/2p/dtc9s94148j8px03g4gkxpkr0000gn/T/d20221001-8728-969mqt --template= --single-branch --depth 1 --branch 7.6.5</span><br><span class="line"></span><br><span class="line">Cloning into &#x27;/var/folders/2p/dtc9s94148j8px03g4gkxpkr0000gn/T/d20221001-8728-969mqt&#x27;...</span><br><span class="line">fatal: unable to access &#x27;https://github.com/robbiehanson/CocoaAsyncSocket.git/&#x27;: HTTP/2 stream 1 was not closed cleanly before end of the underlying stream</span><br></pre></td></tr></table></figure>

<p>解决：</p>
<p>(可能也不需要做下面这个设置，每次报以上错误的时候，一直pod install，直到安装成功)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/48987512/ssl-connect-ssl-error-syscall-in-connection-to-github-com443">SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443</a></p>
<h4 id="hermes-engine的安装问题"><a href="#hermes-engine的安装问题" class="headerlink" title="hermes-engine的安装问题"></a>hermes-engine的安装问题</h4><p>报错信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[!] Error installing hermes-engine</span><br><span class="line">[!] /usr/bin/curl -f -L -o /var/folders/2p/dtc9s94148j8px03g4gkxpkr0000gn/T/d20221001-67147-8lkp1c/file.tgz https://github.com/facebook/react-native/releases/download/v0.70.1/hermes-runtime-darwin-v0.70.1.tar.gz --create-dirs --netrc-optional --retry 2 -A &#x27;CocoaPods/1.11.3 cocoapods-downloader/1.5.1&#x27;</span><br><span class="line"></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0</span><br><span class="line">  0  496M    0 1343k    0     0   1299      0   4d 15h  0:17:38   4d 14h   894</span><br><span class="line">curl: (92) HTTP/2 stream 0 was not closed cleanly: PROTOCOL_ERROR (err 1)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个问题折腾了好久好久好久好久……</p>
</blockquote>
<h5 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h5><ol>
<li>打开一个终端，先执行</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&#x27;your.host:port&#x27; //your.host:port我的是127.0.0.1:1087</span><br><span class="line">export https_proxy=&#x27;your.host:port&#x27; your.host:port我的是127.0.0.1:1087</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>这个终端界面转到项目目录下，再执行pod install –verbose</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install --verbose</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在安装命令添加参数<code>--verbose</code>看打印详细信息</p>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/BUG_delete/article/details/110133505?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-110133505-blog-82894101.t0_edu_mix&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-110133505-blog-82894101.t0_edu_mix&utm_relevant_index=1">Cocoapods安装私有库问题</a></p>
<h5 id="安装完成"><a href="#安装完成" class="headerlink" title="安装完成"></a>安装完成</h5><p>然后自动执行<code>Generating Pods project</code></p>
<p>然后自动执行<code>Integrating client project</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[!] Please close any current Xcode sessions and use `myapp.xcworkspace` for this project from now on.</span><br><span class="line"></span><br><span class="line">Integrating target `Pods-myapp` (`myapp.xcodeproj` project)</span><br><span class="line"></span><br><span class="line">Integrating target `Pods-myapp-myappTests` (`myapp.xcodeproj` project)</span><br><span class="line">  - Running post integrate hooks</span><br><span class="line">  - Writing Lockfile in `Podfile.lock`</span><br><span class="line">  - Writing Manifest in `Pods/Manifest.lock`</span><br><span class="line">  CDN: trunk Relative path: CocoaPods-version.yml exists! Returning local because checking is only performed in repo update</span><br><span class="line"></span><br><span class="line">-&gt; Pod installation complete! There are 59 dependencies from the Podfile and 49 total pods installed.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>根据终端提示，如果想要使用刚添加的第三方库，必须打开<code>MyApp.xcworkspace</code>，而非之前的<code>MyApp.xcodeProj</code>。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c19df91997fd">CocoaPods的安装与使用</a></p>
<h5 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn ios </span><br><span class="line">或</span><br><span class="line">yarn react-native run-ios</span><br></pre></td></tr></table></figure>





<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo insecure &gt;&gt; ~/.curlrc然后 pod install</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">解决办法：</span><br><span class="line">1.删除项目依赖包以及 yarn 缓存</span><br><span class="line">rm -rf node_modules &amp;&amp; yarn cache clean</span><br><span class="line">2.重新装包</span><br><span class="line">yarn install</span><br><span class="line">3.清除 React-Native 缓存</span><br><span class="line">rm -rf ~/.rncache</span><br></pre></td></tr></table></figure>



<p>如果iOS使用的是Mac M1的架构，可能还会遇到Cocoapods 的一些兼容问题。如果在安装 pods依赖时出现问题，可以尝试运行下面的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo arch -x86_64 gem install ffi</span><br><span class="line">arch -x86_64 pod install</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/263303.htm">详解React Native项目中启用Hermes引擎</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010208471/article/details/92068560">解决 React-Native mac 运行报错 error Failed to build iOS project. We ran “xcodebuild” command but it exite</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.apple.com/forums/thread/682927">s</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/sof/514376">更新到最新版本RN 0.64.0后，React本机应用程序将无法运行</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/alameda-dev/installing-react-native-mapbox-navigation-in-ios-e35d43c5987a">Installing React Native with Mapbox Navigation in iOS</a></p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/LIUXIAOXIAOBO/article/details/82894101">[!] Error installing Fabric. /usr/bin/curl -f -L -o /var/folders</a></p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b079d6566c67">【解决】[!] Error installing Fabric. [!]/usr/bin/curl -f -L -o /var/folders</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012477117/article/details/122241972">Pod Error installing Bugly</a></p>
<p><a target="_blank" rel="noopener" href="http://www.caotama.com/670255.html">pod install 报错 :error installing AMapFoundation ,iOS 大佬们来看一下</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/65458086/failed-to-build-ios-project-we-ran-xcodebuild-command-but-it-exited-with-erro">Failed to build iOS project. We ran “xcodebuild” command but it exited with error code 65</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qingpingguo12/article/details/126137315">镜像切换</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/CaptainJava/article/details/109132783">Mac全自动安装brew一键配置国内镜像源</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hh680821/article/details/104936180?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166457782716782417034485%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=166457782716782417034485&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-104936180-null-null.142%5Ev51%5Econtrol,201%5Ev3%5Econtrol_1&utm_term=homebrew%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E5%AE%89%E8%A3%85&spm=1018.2226.3001.4187">Mac HomeBrew国内镜像安装方法</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/yanue/V2rayU/releases/tag/3.3.0">科学上网</a></p>
<p>淘宝镜像：<a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/homebrew/?spm=a2c6h.13651104.0.0.1fc17608pdL2JD">https://mirrors.aliyun.com/homebrew/?spm=a2c6h.13651104.0.0.1fc17608pdL2JD</a></p>
<h4 id="Mac系统下——Android-环境"><a href="#Mac系统下——Android-环境" class="headerlink" title="Mac系统下——Android 环境"></a><a target="_blank" rel="noopener" href="https://www.reactnative.cn/docs/environment-setup">Mac系统下——Android 环境</a></h4><p>Java Development Kit</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/cask-versions</span><br><span class="line">brew install --cask zulu11</span><br></pre></td></tr></table></figure>

<p>React Native 需要 Java Development Kit [JDK] 11。你可以在命令行中输入 <code>javac -version</code>（请注意是 javac，不是 java）来查看你当前安装的 JDK 版本</p>
<h5 id="3-配置-ANDROID-SDK-ROOT-环境变量"><a href="#3-配置-ANDROID-SDK-ROOT-环境变量" class="headerlink" title="3. 配置 ANDROID_SDK_ROOT 环境变量"></a>3. 配置 ANDROID_SDK_ROOT 环境变量<a target="_blank" rel="noopener" href="https://www.reactnative.cn/docs/environment-setup#3-%E9%85%8D%E7%BD%AE-android_sdk_root-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"></a></h5><p>React Native 需要通过环境变量来了解你的 Android SDK 装在什么路径，从而正常进行编译。</p>
<p>具体的做法是把下面的命令加入到 shell 的配置文件中。如果你的 shell 是 zsh，则配置文件为<code>~/.zshrc</code>，如果是 bash 则为<code>~/.bash_profile</code>（可以使用<code>echo $0</code>命令查看你所使用的 shell。）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果你不是通过Android Studio安装的sdk，则其路径可能不同，请自行确定清楚</span></span><br><span class="line">export ANDROID_SDK_ROOT=$HOME/Library/Android/sdk</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/emulator</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/tools</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/tools/bin</span><br><span class="line">export PATH=$PATH:$ANDROID_SDK_ROOT/platform-tools</span><br></pre></td></tr></table></figure>



<blockquote>
<p>译注：~表示用户目录，即<code>/Users/你的用户名/</code>，而小数点开头的文件在 Finder 中是隐藏的，并且这个文件有可能并不存在。可在终端下使用<code>vi ~/.zshrc</code>命令创建或编辑。如不熟悉 vi 操作，请点击<a target="_blank" rel="noopener" href="http://www.eepw.com.cn/article/48018.htm">这里</a>学习。</p>
</blockquote>
<p>使用<code>source $HOME/.zshrc</code>命令来使环境变量设置立即生效（否则重启后才生效）。可以使用<code>echo $ANDROID_SDK_ROOT</code>检查此变量是否已正确设置。</p>
<blockquote>
<p>请确保你正确指定了 Android SDK 路径。你可以在 Android Studio 的”Preferences”菜单中查看 SDK 的真实路径，具体是<strong>Appearance &amp; Behavior</strong> → <strong>System Settings</strong> → <strong>Android SDK</strong>。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/39/">39</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="winney"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">winney</p>
  <div class="site-description" itemprop="description">Doing is better than saying.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">116</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">57</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">53</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.xiaochao.me/" title="https:&#x2F;&#x2F;www.xiaochao.me&#x2F;" rel="noopener" target="_blank">小超</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/winney07" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;winney07" rel="noopener" target="_blank">CSDN</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">winney07</span>
</div>
  <div class="powered-by"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2022033775号-1</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
